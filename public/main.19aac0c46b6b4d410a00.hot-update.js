/*! For license information please see main.19aac0c46b6b4d410a00.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/components/Canvas/Index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var i=s("./node_modules/ogl/src/core/Renderer.js"),o=s("./node_modules/ogl/src/core/Camera.js"),h=s("./node_modules/ogl/src/core/Transform.js"),n=s("./app/components/Canvas/Home/Index.js"),c=s("./app/components/Canvas/About/Index.js"),a=s("./app/components/Canvas/Collections/Index.js"),l=s("./app/components/Canvas/Transition.js"),r=s("./app/components/Canvas/Detail/Index.js"),d=s.n(r);class u{constructor({template:e}){this.template=e,this.x={start:0,distance:0,end:0},this.y={start:0,distance:0,end:0},this.createCamera(),this.createRenderer(),this.createScene(),this.onResize()}createRenderer(){this.renderer=new i.Renderer({alpha:!0,antialias:!0}),this.gl=this.renderer.gl,document.body.appendChild(this.gl.canvas)}createCamera(){this.camera=new o.Camera(this.gl),this.camera.position.z=5}createScene(){this.scene=new h.Transform}createHome(){this.home=new n.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyHome(){this.home&&(this.home.destroy(),this.home=null)}createCollections(){this.collections=new a.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyCollections(){this.collections&&(this.collections.destroy(),this.collections=null)}createAbout(){this.about=new c.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyAbout(){this.about&&(this.about.destroy(),this.about=null)}createDetail(){this.detail=new(d())({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyDetail(){this.detail&&(this.detail.destroy(),this.detail=null)}onPreloaded(){this.onChangeEnd(this.template)}onChangeStart(e,t){this.about&&this.about.hide(),this.collections&&this.collections.hide(),this.home&&this.home.hide(),this.isFromCollectionsToDetail="collections"===this.template&&t.indexOf("detail")>-1,this.isFromDetailToCollections="detail"===this.template&&t.indexOf("collections")>-1,(this.isFromCollectionsToDetail||this.isFromDetailToCollections)&&(this.transition=new l.default({collections:this.collections,gl:this.gl,scene:this.scene,sizes:this.sizes,url:t}))}onChangeEnd(e){"about"===e?this.createAbout():this.about&&this.destroyAbout(),"collections"===e?this.createCollections():this.collections&&this.destroyCollections(),"detail"===e?this.createDetail():this.detail&&this.destroyDetail(),"home"===e?this.createHome():this.destroyHome()}onResize(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.perspective({aspect:window.innerWidth/window.innerHeight});const e=this.camera.fov*(Math.PI/180),t=2*Math.tan(e/2)*this.camera.position.z,s=t*this.camera.aspect;this.sizes={height:t,width:s};const i={sizes:this.sizes};this.about&&this.about.onResize(i),this.collections&&this.collections.onResize(i),this.home&&this.home.onResize(i)}onTouchDown(e){this.isDown=!0,this.x.start=e.touches?e.touches[0].clientX:e.clientX,this.y.start=e.touches?e.touches[0].clientY:e.clientY;const t={x:this.x,y:this.y};this.about&&this.about.onTouchDown(t),this.collections&&this.collections.onTouchDown(t),this.detail&&this.detail.onTouchDown(t),this.home&&this.home.onTouchDown(t)}onTouchMove(e){if(!this.isDown)return;const t=e.touches?e.touches[0].clientX:e.clientX,s=e.touches?e.touches[0].clientY:e.clientY;this.x.end=t,this.y.end=s;const i={x:this.x,y:this.y};this.about&&this.about.onTouchMove(i),this.collections&&this.collections.onTouchMove(i),this.detail&&this.detail.onTouchMove(i),this.home&&this.home.onTouchMove(i)}onTouchUp(e){this.isDown=!1;const t=e.changedTouches?e.changedTouches[0].clientX:e.clientX,s=e.changedTouches?e.changedTouches[0].clientY:e.clientY;this.x.end=t,this.y.end=s;const i={x:this.x,y:this.y};this.about&&this.about.onTouchUp(i),this.collections&&this.collections.onTouchUp(i),this.detail&&this.detail.onTouchUp(i),this.home&&this.home.onTouchUp(i)}onWheel(e){this.collections&&this.collections.onWheel(e),this.home&&this.home.onWheel(e)}update(e){this.about&&this.about.update(e),this.collections&&this.collections.update(),this.detail&&this.detail.update(),this.home&&this.home.update(),this.renderer.render({camera:this.camera,scene:this.scene})}}}},(function(e){e.h=()=>"4cd5e95cbf9f1c8f62f7"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S2dDLGFBQ05oQyxLQUFLZ0MsWUFBWXlDLFVBQVVSLEdBRzFCakUsS0FBS3dDLFFBQ054QyxLQUFLd0MsT0FBT2lDLFVBQVVSLEdBR3JCakUsS0FBSzBCLE1BQ04xQixLQUFLMEIsS0FBSytDLFVBQVVSLEVBRXhCLENBRUFVLE9BQUFBLENBQVFSLEdBQ0huRSxLQUFLZ0MsYUFDTmhDLEtBQUtnQyxZQUFZMkMsUUFBUVIsR0FHeEJuRSxLQUFLMEIsTUFDTjFCLEtBQUswQixLQUFLaUQsUUFBUVIsRUFFdEIsQ0FJQVMsTUFBQUEsQ0FBT0MsR0FDRDdFLEtBQUtvQyxPQUNQcEMsS0FBS29DLE1BQU13QyxPQUFPQyxHQUVoQjdFLEtBQUtnQyxhQUNQaEMsS0FBS2dDLFlBQVk0QyxTQUVmNUUsS0FBS3dDLFFBQ1B4QyxLQUFLd0MsT0FBT29DLFNBRVg1RSxLQUFLMEIsTUFDTjFCLEtBQUswQixLQUFLa0QsU0FFWjVFLEtBQUtVLFNBQVNvRSxPQUFPLENBQ25CM0QsT0FBUW5CLEtBQUttQixPQUNiSSxNQUFPdkIsS0FBS3VCLE9BRWhCLGtCQzFVRndELEVBQW9CQyxFQUFJLElBQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mbG9lbWEvLi9hcHAvY29tcG9uZW50cy9DYW52YXMvSW5kZXguanMiLCJ3ZWJwYWNrOi8vZmxvZW1hL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYW1lcmEsIFJlbmRlcmVyLCBUcmFuc2Zvcm0gfSBmcm9tICdvZ2wnICBcblxuaW1wb3J0IEhvbWUgZnJvbSAnY29tcG9uZW50cy9DYW52YXMvSG9tZS9JbmRleCdcbmltcG9ydCBBYm91dCBmcm9tICdjb21wb25lbnRzL0NhbnZhcy9BYm91dC9JbmRleCdcbmltcG9ydCBDb2xsZWN0aW9ucyBmcm9tICdjb21wb25lbnRzL0NhbnZhcy9Db2xsZWN0aW9ucy9JbmRleCdcbmltcG9ydCBUcmFuc2l0aW9uIGZyb20gJ2NvbXBvbmVudHMvQ2FudmFzL1RyYW5zaXRpb24nXG5pbXBvcnQgRGV0YWlsIGZyb20gJ2NvbXBvbmVudHMvQ2FudmFzL0RldGFpbC9JbmRleCdcbi8vIENhbWVyYSwgUmVuZGVyZXIgYW5kIFRyYW5zZm9ybSBhcmUgdGhlIHRocmVlIGVsZW1lbnRzIG5lZWRlZCB0byBjcmVhdGUgYSAzRCBzY2VuZSAtXG4vLyBCb3gsIFByb2dyYW0gYW5kIE1lc2ggYXJlIHRoZSB0aHJlZSBlbGVtZW50cyBuZWVkZWQgdG8gY3JlYXRlIGEgM0Qgb2JqZWN0XG4vLyBhbGwgdGhlIGVsZW1lbnRzIGFyZSBpbXBvcnRlZCBmcm9tIHRoZSBvZ2wgbGlicmFyeVxuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhcyB7XG4gIGNvbnN0cnVjdG9yICh7IHRlbXBsYXRlIH0pIHtcbiAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cbiAgICB0aGlzLnggPSB7XG4gICAgICBzdGFydDogMCxcbiAgICAgIGRpc3RhbmNlOiAwLFxuICAgICAgZW5kOiAwLFxuICAgIH1cbiAgICB0aGlzLnkgPSB7XG4gICAgICBzdGFydDogMCxcbiAgICAgIGRpc3RhbmNlOiAwLFxuICAgICAgZW5kOiAwLFxuICAgIH1cbiAgICB0aGlzLmNyZWF0ZUNhbWVyYSgpXG4gICAgdGhpcy5jcmVhdGVSZW5kZXJlcigpXG4gICAgdGhpcy5jcmVhdGVTY2VuZSgpXG5cbiAgICB0aGlzLm9uUmVzaXplKClcbiAgfVxuXG4gIGNyZWF0ZVJlbmRlcmVyKCkge1xuICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIoeyAvLyBpdCBhbGxvd3NcbiAgICAgIGFscGhhOiB0cnVlLCAvLyBtYWtlIG91ciBjYW52YXMgdHJhbnNwYXJlbnRcbiAgICAgIGFudGlhbGlhczogdHJ1ZSwgLy8gbWFrZSBvdXIgY2FudmFzIHNtb290aFxuICAgIH0pXG5cbiAgICB0aGlzLmdsID0gdGhpcy5yZW5kZXJlci5nbFxuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmdsLmNhbnZhcylcbiAgfVxuXG4gIGNyZWF0ZUNhbWVyYSgpIHtcbiAgICB0aGlzLmNhbWVyYSA9IG5ldyBDYW1lcmEodGhpcy5nbClcbiAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi56ID0gNSAvLyBzZXQgdGhlIGNhbWVyYSBwb3NpdGlvbiBvbiB0aGUgei1heGlzIHRvIDVcbiAgfVxuXG4gIGNyZWF0ZVNjZW5lKCkge1xuICAgIHRoaXMuc2NlbmUgPSBuZXcgVHJhbnNmb3JtKClcbiAgfVxuICAvKipcbiAgICogSG9tZVxuICAqL1xuIGNyZWF0ZUhvbWUoKSB7XG4gICB0aGlzLmhvbWUgPSBuZXcgSG9tZSh7XG4gICAgIGdsOiB0aGlzLmdsLFxuICAgICBzY2VuZTogdGhpcy5zY2VuZSxcbiAgICAgc2l6ZXM6IHRoaXMuc2l6ZXNcbiAgIH0pXG4gfVxuIFxuICBkZXN0cm95SG9tZSgpIHtcbiAgICBpZiAoIXRoaXMuaG9tZSkgcmV0dXJuXG4gICAgdGhpcy5ob21lLmRlc3Ryb3koKVxuICAgIHRoaXMuaG9tZSA9IG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiBBYm91dFxuICAgKi9cbiAgY3JlYXRlQ29sbGVjdGlvbnMoKSB7XG4gICAgdGhpcy5jb2xsZWN0aW9ucyA9IG5ldyBDb2xsZWN0aW9ucyh7XG4gICAgICBnbDogdGhpcy5nbCxcbiAgICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxuICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXNcbiAgICB9KVxuICB9XG4gIGRlc3Ryb3lDb2xsZWN0aW9ucygpIHtcbiAgICBpZiAoIXRoaXMuY29sbGVjdGlvbnMpIHJldHVyblxuICAgIHRoaXMuY29sbGVjdGlvbnMuZGVzdHJveSgpXG4gICAgdGhpcy5jb2xsZWN0aW9ucyA9IG51bGxcbiAgfVxuXG4gICAgLyoqXG4gICAqIENvbGxlY3Rpb25zXG4gICAqL1xuICAgIGNyZWF0ZUFib3V0KCkge1xuICAgICAgdGhpcy5hYm91dCA9IG5ldyBBYm91dCh7XG4gICAgICAgIGdsOiB0aGlzLmdsLFxuICAgICAgICBzY2VuZTogdGhpcy5zY2VuZSxcbiAgICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXNcbiAgICAgIH0pXG4gICAgfVxuICAgIGRlc3Ryb3lBYm91dCgpIHtcbiAgICAgIGlmICghdGhpcy5hYm91dCkgcmV0dXJuXG4gICAgICB0aGlzLmFib3V0LmRlc3Ryb3koKVxuICAgICAgdGhpcy5hYm91dCA9IG51bGxcbiAgICB9XG4gIC8qKlxuICAgKiBEZXRhaWxcbiAgICovXG4gIGNyZWF0ZURldGFpbCgpIHtcbiAgICB0aGlzLmRldGFpbCA9IG5ldyBEZXRhaWwoe1xuICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICBzY2VuZTogdGhpcy5zY2VuZSxcbiAgICAgIHNpemVzOiB0aGlzLnNpemVzXG4gICAgfSlcbiAgfVxuICBkZXN0cm95RGV0YWlsKCkge1xuICAgIGlmICghdGhpcy5kZXRhaWwpIHJldHVyblxuICAgIHRoaXMuZGV0YWlsLmRlc3Ryb3koKVxuICAgIHRoaXMuZGV0YWlsID0gbnVsbFxuICB9XG4vKipcbiAqIEV2ZW50c1xuICovXG5vblByZWxvYWRlZCgpIHtcbiAgdGhpcy5vbkNoYW5nZUVuZCh0aGlzLnRlbXBsYXRlKVxufVxuXG4gIG9uQ2hhbmdlU3RhcnQodGVtcGxhdGUsIHVybCkge1xuICAgIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICB0aGlzLmFib3V0LmhpZGUoKVxuICAgIH0gXG5cbiAgICBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgdGhpcy5jb2xsZWN0aW9ucy5oaWRlKClcbiAgICB9IFxuXG4gICAgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLmhpZGUoKVxuICAgIH1cblxuICAgIHRoaXMuaXNGcm9tQ29sbGVjdGlvbnNUb0RldGFpbCA9IHRoaXMudGVtcGxhdGUgPT09ICdjb2xsZWN0aW9ucycgJiYgdXJsLmluZGV4T2YoJ2RldGFpbCcpID4gLTFcbiAgICB0aGlzLmlzRnJvbURldGFpbFRvQ29sbGVjdGlvbnMgPSB0aGlzLnRlbXBsYXRlID09PSAnZGV0YWlsJyAmJiB1cmwuaW5kZXhPZignY29sbGVjdGlvbnMnKSA+IC0xXG5cbiAgICBpZiAodGhpcy5pc0Zyb21Db2xsZWN0aW9uc1RvRGV0YWlsIHx8IHRoaXMuaXNGcm9tRGV0YWlsVG9Db2xsZWN0aW9ucykge1xuICAgICAgdGhpcy50cmFuc2l0aW9uID0gbmV3IFRyYW5zaXRpb24oe1xuICAgICAgICBjb2xsZWN0aW9ucyA6IHRoaXMuY29sbGVjdGlvbnMsXG4gICAgICAgIGdsIDogdGhpcy5nbCxcbiAgICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsIFxuICAgICAgICBzaXplcyA6IHRoaXMuc2l6ZXMsXG4gICAgICAgIHVybCxcbiAgICAgIH0pXG4gICAgfVxuXG4gIH1cblxuICBvbkNoYW5nZUVuZCh0ZW1wbGF0ZSkge1xuICAgIGlmICh0ZW1wbGF0ZSA9PT0gJ2Fib3V0Jykge1xuICAgICAgdGhpcy5jcmVhdGVBYm91dCgpXG4gICAgfSBlbHNlIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICB0aGlzLmRlc3Ryb3lBYm91dCgpXG4gICAgfVxuXG4gICAgaWYgKHRlbXBsYXRlID09PSAnY29sbGVjdGlvbnMnKSB7XG4gICAgICB0aGlzLmNyZWF0ZUNvbGxlY3Rpb25zKClcblxuICAgIH0gZWxzZSBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgdGhpcy5kZXN0cm95Q29sbGVjdGlvbnMoKVxuICAgIH1cbiAgICBpZiAodGVtcGxhdGUgPT09ICdkZXRhaWwnKSB7XG4gICAgICB0aGlzLmNyZWF0ZURldGFpbCgpXG5cbiAgICB9IGVsc2UgaWYgKHRoaXMuZGV0YWlsKSB7XG4gICAgICB0aGlzLmRlc3Ryb3lEZXRhaWwoKVxuICAgIH1cblxuICAgIGlmICh0ZW1wbGF0ZSA9PT0gJ2hvbWUnKSB7XG4gICAgICB0aGlzLmNyZWF0ZUhvbWUoKVxuICAgIH0gZWxzZSAge1xuICAgICAgdGhpcy5kZXN0cm95SG9tZSgpXG4gICAgfVxuXG4gIH1cblxuXG5cbiAgb25SZXNpemUoKSB7XG4gICAgdGhpcy5yZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpXG4gICAgXG4gICAgdGhpcy5jYW1lcmEucGVyc3BlY3RpdmUoe1xuICAgICAgYXNwZWN0OiB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodFxuICAgIH0pO1xuICAgIGNvbnN0IGZvdiA9IHRoaXMuY2FtZXJhLmZvdiAqIChNYXRoLlBJIC8gMTgwKVxuICAgIGNvbnN0IGhlaWdodCA9IDIgKiBNYXRoLnRhbihmb3YgLyAyKSAqIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnpcbiAgICBjb25zdCB3aWR0aCA9IGhlaWdodCAqIHRoaXMuY2FtZXJhLmFzcGVjdFxuXG4gICAgdGhpcy5zaXplcyA9IHtcbiAgICAgIGhlaWdodCxcbiAgICAgIHdpZHRoXG4gICAgfVxuXG4gICAgY29uc3QgdmFsdWVzID0ge1xuICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXNcbiAgICB9XG5cbiAgaWYgKHRoaXMuYWJvdXQpIHtcbiAgICB0aGlzLmFib3V0Lm9uUmVzaXplKHZhbHVlcylcbiAgfVxuXG4gIGlmICh0aGlzLmNvbGxlY3Rpb25zKSB7XG4gICAgdGhpcy5jb2xsZWN0aW9ucy5vblJlc2l6ZSh2YWx1ZXMpXG4gIH1cblxuICBpZiAodGhpcy5ob21lKSB7XG4gICAgdGhpcy5ob21lLm9uUmVzaXplKHZhbHVlcylcbiAgfVxuXG4gIH1cblxuICBvblRvdWNoRG93bihldmVudCkge1xuICAgIHRoaXMuaXNEb3duID0gdHJ1ZVxuICAgIHRoaXMueC5zdGFydCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5jbGllbnRYXG4gICAgdGhpcy55LnN0YXJ0ID0gZXZlbnQudG91Y2hlcyA/IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSA6IGV2ZW50LmNsaWVudFlcblxuICAgIGNvbnN0IHZhbHVlcyA9IHtcbiAgICAgIHg6IHRoaXMueCxcbiAgICAgIHk6IHRoaXMueSxcbiAgICB9XG5cbiAgICBpZih0aGlzLmFib3V0KSB7XG4gICAgICB0aGlzLmFib3V0Lm9uVG91Y2hEb3duKHZhbHVlcylcbiAgICB9XG4gICAgaWYodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgdGhpcy5jb2xsZWN0aW9ucy5vblRvdWNoRG93bih2YWx1ZXMpXG4gICAgfVxuICAgIGlmKHRoaXMuZGV0YWlsKSB7XG4gICAgICB0aGlzLmRldGFpbC5vblRvdWNoRG93bih2YWx1ZXMpXG4gICAgfVxuICAgXG4gICAgaWYodGhpcy5ob21lKSB7XG4gICAgICB0aGlzLmhvbWUub25Ub3VjaERvd24odmFsdWVzKVxuICAgIH1cbiAgfVxuICBvblRvdWNoTW92ZShldmVudCkgeyAvLyBhbGxvd3MgdG8gbW92ZSB0aGUgd2ViIEdMIHBhZ2Ugd2l0aCB0aGUgbW91c2VcbiAgICBpZiAoIXRoaXMuaXNEb3duKSByZXR1cm5cblxuICAgIGNvbnN0IHggPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYIDogZXZlbnQuY2xpZW50WFxuICAgIGNvbnN0IHkgPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRZIDogZXZlbnQuY2xpZW50WVxuXG4gICAgdGhpcy54LmVuZCA9IHhcbiAgICB0aGlzLnkuZW5kID0geVxuXG4gICAgY29uc3QgdmFsdWVzID0ge1xuICAgICAgeDogdGhpcy54LFxuICAgICAgeTogdGhpcy55LFxuICAgIH1cblxuICAgIGlmKHRoaXMuYWJvdXQpIHtcbiAgICAgIHRoaXMuYWJvdXQub25Ub3VjaE1vdmUodmFsdWVzKVxuICAgIH1cblxuICAgIGlmKHRoaXMuY29sbGVjdGlvbnMpIHtcbiAgICAgIHRoaXMuY29sbGVjdGlvbnMub25Ub3VjaE1vdmUodmFsdWVzKVxuICAgIH1cblxuICAgIGlmKHRoaXMuZGV0YWlsKSB7XG4gICAgICB0aGlzLmRldGFpbC5vblRvdWNoTW92ZSh2YWx1ZXMpXG4gICAgfVxuICAgXG4gICAgaWYodGhpcy5ob21lKSB7XG4gICAgICB0aGlzLmhvbWUub25Ub3VjaE1vdmUodmFsdWVzKVxuICAgIH1cbiAgfVxuXG4gIG9uVG91Y2hVcChldmVudCkge1xuICAgIHRoaXMuaXNEb3duID0gZmFsc2VcbiAgICBjb25zdCB4ID0gZXZlbnQuY2hhbmdlZFRvdWNoZXMgPyBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYIDogZXZlbnQuY2xpZW50WFxuICAgIGNvbnN0IHkgPSBldmVudC5jaGFuZ2VkVG91Y2hlcyA/IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkgOiBldmVudC5jbGllbnRZXG5cbiAgICB0aGlzLnguZW5kID0geFxuICAgIHRoaXMueS5lbmQgPSB5XG5cbiAgICAvLyB0aGlzLnguZGlzdGFuY2UgPSB0aGlzLnguc3RhcnQgLSB0aGlzLnguZW5kXG4gICAgLy8gdGhpcy55LmRpc3RhbmNlID0gdGhpcy55LnN0YXJ0IC0gdGhpcy55LmVuZFxuXG4gICAgY29uc3QgdmFsdWVzID0ge1xuICAgICAgeDogdGhpcy54LFxuICAgICAgeTogdGhpcy55LFxuICAgIH1cblxuICAgIGlmKHRoaXMuYWJvdXQpIHtcbiAgICAgIHRoaXMuYWJvdXQub25Ub3VjaFVwKHZhbHVlcylcbiAgICB9XG5cbiAgICBpZih0aGlzLmNvbGxlY3Rpb25zKSB7XG4gICAgICB0aGlzLmNvbGxlY3Rpb25zLm9uVG91Y2hVcCh2YWx1ZXMpXG4gICAgfVxuICBcbiAgICBpZih0aGlzLmRldGFpbCkge1xuICAgICAgdGhpcy5kZXRhaWwub25Ub3VjaFVwKHZhbHVlcylcbiAgICB9XG4gIFxuICAgIGlmKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLm9uVG91Y2hVcCh2YWx1ZXMpXG4gICAgfVxuICB9IFxuXG4gIG9uV2hlZWwoZXZlbnQpIHtcbiAgICBpZih0aGlzLmNvbGxlY3Rpb25zKSB7XG4gICAgICB0aGlzLmNvbGxlY3Rpb25zLm9uV2hlZWwoZXZlbnQpIFxuICAgIH1cblxuICAgIGlmKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLm9uV2hlZWwoZXZlbnQpIFxuICAgIH1cbiAgfVxuICAvKipcbiAgICogTG9vcHNcbiAgICovXG4gIHVwZGF0ZShzY3JvbGwpIHtcbiAgICBpZiAodGhpcy5hYm91dCkge1xuICAgICAgdGhpcy5hYm91dC51cGRhdGUoc2Nyb2xsKVxuICAgIH1cbiAgICBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgdGhpcy5jb2xsZWN0aW9ucy51cGRhdGUoKVxuICAgIH1cbiAgICBpZiAodGhpcy5kZXRhaWwpIHtcbiAgICAgIHRoaXMuZGV0YWlsLnVwZGF0ZSgpXG4gICAgfVxuICAgIGlmKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLnVwZGF0ZSgpXG4gICAgfVxuICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHtcbiAgICAgIGNhbWVyYTogdGhpcy5jYW1lcmEsXG4gICAgICBzY2VuZTogdGhpcy5zY2VuZSxcbiAgICB9KVxuICB9XG59XG5cblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiNGNkNWU5NWNiZjlmMWM4ZjYyZjdcIikiXSwibmFtZXMiOlsiQ2FudmFzIiwiY29uc3RydWN0b3IiLCJ0ZW1wbGF0ZSIsInRoaXMiLCJ4Iiwic3RhcnQiLCJkaXN0YW5jZSIsImVuZCIsInkiLCJjcmVhdGVDYW1lcmEiLCJjcmVhdGVSZW5kZXJlciIsImNyZWF0ZVNjZW5lIiwib25SZXNpemUiLCJyZW5kZXJlciIsIlJlbmRlcmVyIiwiYWxwaGEiLCJhbnRpYWxpYXMiLCJnbCIsImRvY3VtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwiY2FudmFzIiwiY2FtZXJhIiwiQ2FtZXJhIiwicG9zaXRpb24iLCJ6Iiwic2NlbmUiLCJUcmFuc2Zvcm0iLCJjcmVhdGVIb21lIiwiaG9tZSIsIkhvbWUiLCJzaXplcyIsImRlc3Ryb3lIb21lIiwiZGVzdHJveSIsImNyZWF0ZUNvbGxlY3Rpb25zIiwiY29sbGVjdGlvbnMiLCJDb2xsZWN0aW9ucyIsImRlc3Ryb3lDb2xsZWN0aW9ucyIsImNyZWF0ZUFib3V0IiwiYWJvdXQiLCJBYm91dCIsImRlc3Ryb3lBYm91dCIsImNyZWF0ZURldGFpbCIsImRldGFpbCIsIkRldGFpbCIsImRlc3Ryb3lEZXRhaWwiLCJvblByZWxvYWRlZCIsIm9uQ2hhbmdlRW5kIiwib25DaGFuZ2VTdGFydCIsInVybCIsImhpZGUiLCJpc0Zyb21Db2xsZWN0aW9uc1RvRGV0YWlsIiwiaW5kZXhPZiIsImlzRnJvbURldGFpbFRvQ29sbGVjdGlvbnMiLCJ0cmFuc2l0aW9uIiwiVHJhbnNpdGlvbiIsInNldFNpemUiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJwZXJzcGVjdGl2ZSIsImFzcGVjdCIsImZvdiIsIk1hdGgiLCJQSSIsImhlaWdodCIsInRhbiIsIndpZHRoIiwidmFsdWVzIiwib25Ub3VjaERvd24iLCJldmVudCIsImlzRG93biIsInRvdWNoZXMiLCJjbGllbnRYIiwiY2xpZW50WSIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaFVwIiwiY2hhbmdlZFRvdWNoZXMiLCJvbldoZWVsIiwidXBkYXRlIiwic2Nyb2xsIiwicmVuZGVyIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9