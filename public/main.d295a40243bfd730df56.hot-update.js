/*! For license information please see main.d295a40243bfd730df56.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/components/Canvas/Collections/Index.js":(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});var i=s("./app/components/Canvas/Collections/Media.js"),l=s("./node_modules/lodash/map.js"),o=s.n(l),r=s("./node_modules/ogl/src/core/Transform.js"),n=s("./node_modules/ogl/src/extras/Plane.js"),h=s("./node_modules/gsap/index.js"),a=s("./node_modules/prefix/index.js"),c=s.n(a);const d=class{constructor({gl:t,scene:e,sizes:s,transition:i}){this.id="collections",this.gl=t,this.sizes=s,this.scene=e,this.transition=i,this.transformPrefix=c()("transform"),this.group=new r.Transform,this.galleryElement=document.querySelector(".collections__gallery"),this.galleryElementWrapper=document.querySelector(".collections__gallery__wrapper"),this.titlesElement=document.querySelector(".collections__titles"),this.collectionsElements=document.querySelectorAll(".collections__article"),this.collectionsElementsActive="collections__article--active",this.mediasElements=document.querySelectorAll(".collections__gallery__media"),document.querySelectorAll(".collections__gallery__link").forEach((t=>{})),this.scroll={current:0,target:0,start:0,lerp:.1,velocity:1},this.createGeometry(),this.createGallery(),this.onResize({sizes:this.sizes}),this.group.setParent(this.scene),this.show()}createGeometry(){this.geometry=new n.Plane(this.gl)}createGallery(){this.medias=o()(this.mediasElements,((t,e)=>new i.default({element:t,geometry:this.geometry,index:e,gl:this.gl,scene:this.group,sizes:this.sizes})))}async show(){if(this.transition){this.media.opacity.multiplier=0;const{src:t}=this.transition.mesh.program.uniforms.tMap.value.image,e=window.TEXTURES[t],s=this.medias.find((t=>t.texture===e));h.default.delayedCall(1,(t=>{this.scroll.current=this.scroll.target=this.scroll.last=this.scroll.start=-s.mesh.position.x})),this.transition.animate(this.medias[0].mesh,(t=>{this.media.opacity.multiplier=1})),o()(this.medias,(t=>{t!==this.media&&t.show()}))}else o()(this.medias,(t=>t.show()))}hide(){o()(this.medias,(t=>t.hide()))}onResize(t){this.bounds=this.galleryElementWrapper.getBoundingClientRect(),this.scroll.last=this.scroll.target=0,o()(this.medias,(e=>e.onResize(t,this.scroll))),this.scroll.limit=this.bounds.width-this.medias[0].element.clientWidth}onTouchDown({x:t,y:e}){this.scroll.last=this.scroll.current}onTouchMove({x:t,y:e}){const s=t.start-t.end;this.scroll.target=this.scroll.last-s}onTouchUp({x:t,y:e}){}onWheel({pixelY:t}){this.scroll.target-=t}onChange(t){this.index=t;const e=parseInt(this.mediasElements[this.index].getAttribute("data-index"));o()(this.collectionsElements,((t,s)=>{s===e?t.classList.add(this.collectionsElementsActive):t.classList.remove(this.collectionsElementsActive)})),this.titlesElement.style[this.transformPrefix]=`translateY(-${25*e}%) translate(-50%, -50%) rotate(-90deg)`,this.media=this.medias[this.index]}update(){this.scroll.target=h.default.utils.clamp(-this.scroll.limit,0,this.scroll.target),this.scroll.current=h.default.utils.interpolate(this.scroll.current,this.scroll.target,this.scroll.lerp),this.galleryElement.style[this.transformPrefix]=`translateX(${this.scroll.current}px)`,this.scroll.last<this.scroll.current?this.scroll.direction="right":this.scroll.last>this.scroll.current&&(this.scroll.direction="left"),this.scroll.last=this.scroll.current;const t=Math.floor(Math.abs(this.scroll.current-this.medias[0].bounds.width/2)/this.scroll.limit)*(this.medias.length-1);this.index!==t&&this.onChange(t),o()(this.medias,((t,e)=>{t.update(this.scroll.current,this.index),t.update()}))}destroy(){this.scene.removeChild(this.group)}}},"./app/components/Canvas/Collections/Media.js":(t,e,s)=>{s.r(e),s.d(e,{default:()=>h});var i=s("./node_modules/ogl/src/core/Program.js"),l=s("./node_modules/ogl/src/core/Mesh.js"),o=s("./node_modules/gsap/index.js"),r=s("./app/shaders/collections-vertex.glsl"),n=s("./app/shaders/collections-fragment.glsl");const h=class{constructor({element:t,geometry:e,gl:s,scene:i,index:l,sizes:o}){this.element=t,this.gl=s,this.geometry=e,this.scene=i,this.index=l,this.sizes=o,this.extra={x:0,y:0},this.opacity={current:0,target:0,lerp:.1,multiplier:0},this.createTexture(),this.createProgram(),this.createMesh(),this.createBounds({sizes:this.sizes})}createTexture(){const t=this.element.querySelector(".collections__gallery__media__image");this.texture=window.TEXTURES[t.getAttribute("data-src")]}createProgram(){this.program=new i.Program(this.gl,{fragment:n.default,vertex:r.default,uniforms:{tMap:{value:this.texture},uAlpha:{value:this.texture}}})}createMesh(){this.mesh=new l.Mesh(this.gl,{geometry:this.geometry,program:this.program}),this.mesh.setParent(this.scene)}createBounds({sizes:t}){this.sizes=t,this.bounds=this.element.getBoundingClientRect(),this.updateScale(t),this.updateX(),this.updateY()}show(){o.default.fromTo(this.opacity,{multiplier:0},{multiplier:1})}hide(){o.default.to(this.program.uniforms.uAlpha,{multiplier:0})}onResize(t,e){this.extra={x:0,y:0},this.createBounds(t),this.updateX(e&&e.x),this.updateY(e&&e.y)}updateScale(){this.height=this.bounds.height/window.innerHeight,this.width=this.bounds.width/window.innerWidth,this.mesh.scale.x=this.sizes.width*this.width,this.mesh.scale.y=this.sizes.height*this.height}updateX(t=0){this.x=(this.bounds.left+t)/window.innerWidth,this.mesh.position.x=-this.sizes.width/2+this.mesh.scale.x/2+this.x*this.sizes.width+this.extra.x}updateY(t=0){this.y=(this.bounds.top+t)/window.innerHeight,this.mesh.position.y=this.sizes.height/2-this.mesh.scale.y/2-this.y*this.sizes.height+this.extra.y}update(t,e){this.updateX(t);this.mesh.rotation.z=-.02*Math.PI*Math.sin(1*this.index),this.mesh.position.y=.1*Math.sin(1*this.index),this.opacity.target=e===this.index?1:.4,this.opacity.current=o.default.utils.interpolate(this.opacity.current,this.opacity.target,this.opacity.lerp),this.program.uniforms.uAlpha.value=this.opacity.multiplier*this.opacity.current}}},"./app/shaders/collections-fragment.glsl":(t,e,s)=>{s.r(e),s.d(e,{default:()=>i});const i="precision highp float;\n#define GLSLIFY 1\n\nuniform float uAlpha;\nuniform sampler2D tMap;\n   \nvarying vec4 vPosition;\nvarying vec2 vUv;\n\nvoid main() {\n    vec4 texture = texture2D(tMap, vUv);\n\n    gl_FragColor = texture; // set the color or texture of the cube to red\n    gl_FragColor.a = uAlpha;\n}"},"./app/shaders/collections-vertex.glsl":(t,e,s)=>{s.r(e),s.d(e,{default:()=>i});const i="#define GLSLIFY 1\n#define PI 3.1415926535897932384626433832795\n\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform float uSpeed;\nuniform vec2 uViewportSizes;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvarying vec4 vPosition;\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n\n  vec4 newPosition = modelViewMatrix * vec4(position, 1.0); // modeviewMatrix multiply by the position of the vertex\n\nvPosition = newPosition;\n\n  gl_Position = projectionMatrix * newPosition;\n}"}},(function(t){t.h=()=>"d7c6bfb8ab52273dc7bf"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S2lDLE9BRWpEakMsS0FBS29DLFFBQVFqQixPQUFTYyxJQUFVakMsS0FBS2lDLE1BQVEsRUFBSSxHQUNqRGpDLEtBQUtvQyxRQUFRbEIsUUFBVStCLEVBQUFBLFFBQUtnQyxNQUFNRSxZQUFZbkYsS0FBS29DLFFBQVFsQixRQUFTbEIsS0FBS29DLFFBQVFqQixPQUFRbkIsS0FBS29DLFFBQVFmLE1BRXRHckIsS0FBS3dDLFFBQVFDLFNBQVMwRCxPQUFPeEQsTUFBUTNDLEtBQUtvQyxRQUFRQyxXQUFhckMsS0FBS29DLFFBQVFsQixPQUc5RSxzRkM3SUYsa1pDQUEsdWhCQ0FBa0csRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zsb2VtYS8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy9Db2xsZWN0aW9ucy9JbmRleC5qcyIsIndlYnBhY2s6Ly9mbG9lbWEvLi9hcHAvY29tcG9uZW50cy9DYW52YXMvQ29sbGVjdGlvbnMvTWVkaWEuanMiLCJ3ZWJwYWNrOi8vZmxvZW1hLy4vYXBwL3NoYWRlcnMvY29sbGVjdGlvbnMtZnJhZ21lbnQuZ2xzbCIsIndlYnBhY2s6Ly9mbG9lbWEvLi9hcHAvc2hhZGVycy9jb2xsZWN0aW9ucy12ZXJ0ZXguZ2xzbCIsIndlYnBhY2s6Ly9mbG9lbWEvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNZWRpYSBmcm9tICcuL01lZGlhJ1xuaW1wb3J0IG1hcCBmcm9tICdsb2Rhc2gvbWFwJ1xuaW1wb3J0IHsgUGxhbmUsIFRyYW5zZm9ybSB9IGZyb20gJ29nbCdcbmltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXG5pbXBvcnQgUHJlZml4IGZyb20gJ3ByZWZpeCdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcih7IGdsLCBzY2VuZSwgc2l6ZXMsIHRyYW5zaXRpb24gfSkge1xuICAgIHRoaXMuaWQgPSAnY29sbGVjdGlvbnMnIC8vIGlkIG9mIHRoZSBjdXJyZW50IHBhZ2VcbiAgICB0aGlzLmdsID0gZ2xcbiAgICB0aGlzLnNpemVzID0gc2l6ZXNcbiAgICB0aGlzLnNjZW5lID0gc2NlbmVcbiAgICB0aGlzLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uXG5cbiAgICB0aGlzLnRyYW5zZm9ybVByZWZpeCA9IFByZWZpeCgndHJhbnNmb3JtJylcblxuICAgIHRoaXMuZ3JvdXAgPSBuZXcgVHJhbnNmb3JtKCk7XG5cbiAgICB0aGlzLmdhbGxlcnlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbGxlY3Rpb25zX19nYWxsZXJ5Jyk7XG4gICAgdGhpcy5nYWxsZXJ5RWxlbWVudFdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29sbGVjdGlvbnNfX2dhbGxlcnlfX3dyYXBwZXInKTtcblxuICAgIHRoaXMudGl0bGVzRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xsZWN0aW9uc19fdGl0bGVzJyk7XG5cbiAgICB0aGlzLmNvbGxlY3Rpb25zRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29sbGVjdGlvbnNfX2FydGljbGUnKTtcbiAgICB0aGlzLmNvbGxlY3Rpb25zRWxlbWVudHNBY3RpdmUgPSAnY29sbGVjdGlvbnNfX2FydGljbGUtLWFjdGl2ZSc7XG5cbiAgICB0aGlzLm1lZGlhc0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbGxlY3Rpb25zX19nYWxsZXJ5X19tZWRpYScpO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbGxlY3Rpb25zX19nYWxsZXJ5X19saW5rJykuZm9yRWFjaChsaW5rID0+IHtcbiAgICB9KTtcblxuICAgIHRoaXMuc2Nyb2xsID0ge1xuICAgICAgY3VycmVudDogMCxcbiAgICAgIHRhcmdldDogMCxcbiAgICAgIHN0YXJ0OiAwLFxuICAgICAgbGVycDogMC4xLFxuICAgICAgdmVsb2NpdHk6IDEsXG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVHZW9tZXRyeSgpO1xuICAgIHRoaXMuY3JlYXRlR2FsbGVyeSgpO1xuXG4gICAgdGhpcy5vblJlc2l6ZSh7XG4gICAgICBzaXplczogdGhpcy5zaXplc1xuICAgIH0pXG4gICAgdGhpcy5ncm91cC5zZXRQYXJlbnQodGhpcy5zY2VuZSlcblxuICAgIHRoaXMuc2hvdygpXG4gIH1cblxuICBjcmVhdGVHZW9tZXRyeSgpIHtcbiAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IFBsYW5lKHRoaXMuZ2wpXG4gIH1cblxuICBjcmVhdGVHYWxsZXJ5KCkge1xuICAgIHRoaXMubWVkaWFzID0gbWFwKHRoaXMubWVkaWFzRWxlbWVudHMsIChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBNZWRpYSh7XG4gICAgICAgIGVsZW1lbnQsXG4gICAgICAgIGdlb21ldHJ5OiB0aGlzLmdlb21ldHJ5LFxuICAgICAgICBpbmRleCxcbiAgICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICAgIHNjZW5lOiB0aGlzLmdyb3VwLFxuICAgICAgICBzaXplczogdGhpcy5zaXplcywgIFxuICAgICAgfSlcblxuICAgIH0pXG4gIH1cbiAgICAgIC8qKlxuICAgICAqIEFuaW1hdGlvbnNcbiAgICAgKi9cbiAgYXN5bmMgc2hvdygpIHtcbiAgICBpZiAodGhpcy50cmFuc2l0aW9uKSB7XG4gICAgICB0aGlzLm1lZGlhLm9wYWNpdHkubXVsdGlwbGllciA9IDBcblxuICAgICAgY29uc3QgeyBzcmMgfSA9IHRoaXMudHJhbnNpdGlvbi5tZXNoLnByb2dyYW0udW5pZm9ybXMudE1hcC52YWx1ZS5pbWFnZVxuICAgICAgY29uc3QgdGV4dHVyZSA9IHdpbmRvdy5URVhUVVJFU1tzcmNdXG4gICAgICBjb25zdCBtZWRpYSA9IHRoaXMubWVkaWFzLmZpbmQobWVkaWEgPT4gbWVkaWEudGV4dHVyZSA9PT0gdGV4dHVyZSlcblxuICAgICAgR1NBUC5kZWxheWVkQ2FsbCgxLCBfID0+IHtcbiAgICAgICAgdGhpcy5zY3JvbGwuY3VycmVudCA9IHRoaXMuc2Nyb2xsLnRhcmdldCA9IHRoaXMuc2Nyb2xsLmxhc3QgPSB0aGlzLnNjcm9sbC5zdGFydCA9IC1tZWRpYS5tZXNoLnBvc2l0aW9uLnhcbiAgICAgIH0pXG5cbiAgICAgIHRoaXMudHJhbnNpdGlvbi5hbmltYXRlKHRoaXMubWVkaWFzWzBdLm1lc2gsIF8gPT4ge1xuICAgICAgICB0aGlzLm1lZGlhLm9wYWNpdHkubXVsdGlwbGllciA9IDFcbiAgICAgIH0pXG5cbiAgICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4ge1xuICAgICAgICBpZiAobWVkaWEgIT09IHRoaXMubWVkaWEpIHtcbiAgICAgICAgICBtZWRpYS5zaG93KClcbiAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEuc2hvdygpKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICBoaWRlKCkge1xuICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEuaGlkZSgpKVxuICAgIH1cbiAgICBcbiAgLyoqXG4gICAqIFxuICAgKiBldmVudHNcbiAgICovXG4gIG9uUmVzaXplKCBldmVudCApIHtcbiAgICBcbiAgICB0aGlzLmJvdW5kcyA9IHRoaXMuZ2FsbGVyeUVsZW1lbnRXcmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyAvLyBnZXQgdGhlIHNpemUgb2YgdGhlIGdhbGxlcnkgZWxlbWVudCBmb3IgdGhlIFdlYiBHTCBcbiAgICAgIFxuICAgIHRoaXMuc2Nyb2xsLmxhc3QgPSB0aGlzLnNjcm9sbC50YXJnZXQgPSAwXG4gICAgXG4gICAgbWFwKHRoaXMubWVkaWFzLCBtZWRpYSA9PiBtZWRpYS5vblJlc2l6ZSggZXZlbnQsIHRoaXMuc2Nyb2xsICkpXG5cbiAgICB0aGlzLnNjcm9sbC5saW1pdCA9IHRoaXMuYm91bmRzLndpZHRoIC0gdGhpcy5tZWRpYXNbMF0uZWxlbWVudC5jbGllbnRXaWR0aFxuICAgIH1cbiAgXG4gIG9uVG91Y2hEb3duICh7IHgsIHkgfSkgeyBcbiAgICB0aGlzLnNjcm9sbC5sYXN0ID0gdGhpcy5zY3JvbGwuY3VycmVudFxuICB9XG5cbiAgb25Ub3VjaE1vdmUgKHsgeCwgeSB9KSB7XG4gICAgY29uc3QgZGlzdGFuY2UgPSB4LnN0YXJ0IC0geC5lbmRcblxuICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IHRoaXMuc2Nyb2xsLmxhc3QgLSBkaXN0YW5jZVxuICB9XG5cbiAgb25Ub3VjaFVwICh7IHgsIHkgfSkge1xuICB9XG5cbiAgb25XaGVlbCh7IHBpeGVsWSB9KSB7XG4gICAgdGhpcy5zY3JvbGwudGFyZ2V0IC09IHBpeGVsWSAgLy8gcmV2ZXJzZWQgZG93biBhbmQgdXAgdGhlIHNjcm9sbCBkaXJlY3Rpb25cbiAgfVxuICAvKipcbiAgICogQ2hhbmdlZFxuICAgKi9cbiAgb25DaGFuZ2UoaW5kZXgpIHtcbiAgICB0aGlzLmluZGV4ID0gaW5kZXhcblxuICAgIGNvbnN0IHNlbGVjdGVkQ29sbGVjdGlvbiA9IHBhcnNlSW50KHRoaXMubWVkaWFzRWxlbWVudHNbdGhpcy5pbmRleF0uZ2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JykpXG5cbiAgICBtYXAodGhpcy5jb2xsZWN0aW9uc0VsZW1lbnRzLCAoZWxlbWVudCwgZWxlbWVudEluZGV4KSA9PiB7XG4gICAgICBpZiAoZWxlbWVudEluZGV4ID09PSBzZWxlY3RlZENvbGxlY3Rpb24pIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuY29sbGVjdGlvbnNFbGVtZW50c0FjdGl2ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmNvbGxlY3Rpb25zRWxlbWVudHNBY3RpdmUpXG4gICAgICB9XG4gICAgfSlcblxuICAgIHRoaXMudGl0bGVzRWxlbWVudC5zdHlsZVt0aGlzLnRyYW5zZm9ybVByZWZpeF0gPSBgdHJhbnNsYXRlWSgtJHsyNSAqIHNlbGVjdGVkQ29sbGVjdGlvbn0lKSB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgcm90YXRlKC05MGRlZylgXG5cbiAgICB0aGlzLm1lZGlhID0gdGhpcy5tZWRpYXNbdGhpcy5pbmRleF1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVcbiAgICovXG4gIHVwZGF0ZSgpIHtcblxuICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IEdTQVAudXRpbHMuY2xhbXAoLXRoaXMuc2Nyb2xsLmxpbWl0LCAwLCB0aGlzLnNjcm9sbC50YXJnZXQpXG5cbiAgICB0aGlzLnNjcm9sbC5jdXJyZW50ID0gR1NBUC51dGlscy5pbnRlcnBvbGF0ZSh0aGlzLnNjcm9sbC5jdXJyZW50LCB0aGlzLnNjcm9sbC50YXJnZXQsIHRoaXMuc2Nyb2xsLmxlcnApIFxuXG4gICAgdGhpcy5nYWxsZXJ5RWxlbWVudC5zdHlsZVt0aGlzLnRyYW5zZm9ybVByZWZpeF0gPSBgdHJhbnNsYXRlWCgke3RoaXMuc2Nyb2xsLmN1cnJlbnR9cHgpYFxuXG4gICAgaWYodGhpcy5zY3JvbGwubGFzdCA8IHRoaXMuc2Nyb2xsLmN1cnJlbnQpIHtcbiAgICAgIHRoaXMuc2Nyb2xsLmRpcmVjdGlvbiA9ICdyaWdodCdcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2Nyb2xsLmxhc3QgPiB0aGlzLnNjcm9sbC5jdXJyZW50KSB7XG4gICAgICB0aGlzLnNjcm9sbC5kaXJlY3Rpb24gPSAnbGVmdCdcbiAgICB9XG5cbiAgICB0aGlzLnNjcm9sbC5sYXN0ID0gdGhpcy5zY3JvbGwuY3VycmVudFxuXG4gICAgY29uc3QgaW5kZXggPSBNYXRoLmZsb29yKE1hdGguYWJzKCh0aGlzLnNjcm9sbC5jdXJyZW50IC0gdGhpcy5tZWRpYXNbMF0uYm91bmRzLndpZHRoIC8gMikpIC8gdGhpcy5zY3JvbGwubGltaXQpICogKHRoaXMubWVkaWFzLmxlbmd0aCAtMSkgLy8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgY3VycmVudCBzY3JvbGwgcG9zaXRpb24gLSBNQXRoaS5mbG9vciB0byBnZXQgdGhlIGludGVnZXIgdmFsdWUgb2YgZWFjaCBpdGVtXG5cbiAgICBpZiAodGhpcy5pbmRleCAhPT0gaW5kZXgpIHtcbiAgICAgIFxuICAgICAgdGhpcy5vbkNoYW5nZShpbmRleClcblxuICAgIH0gLy8gcHJldmVudCB0byBoYXZlIHdlaXJkIGluZGV4IHZhbHVlc1xuXG4gICAgbWFwKHRoaXMubWVkaWFzLCAobWVkaWEsIGluZGV4KSA9PiB7XG4gICAgICBtZWRpYS51cGRhdGUodGhpcy5zY3JvbGwuY3VycmVudCwgdGhpcy5pbmRleClcblxuICAgICAgbWVkaWEudXBkYXRlKClcblxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogRGVzdHJveVxuICAgKi9cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnNjZW5lLnJlbW92ZUNoaWxkKHRoaXMuZ3JvdXApXG4gIH1cbn0iLCJpbXBvcnQge01lc2gsIFByb2dyYW19IGZyb20gJ29nbCdcbmltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXG5pbXBvcnQgdmVydGV4IGZyb20gJ3NoYWRlcnMvY29sbGVjdGlvbnMtdmVydGV4Lmdsc2wnXG5pbXBvcnQgZnJhZ21lbnQgZnJvbSAnc2hhZGVycy9jb2xsZWN0aW9ucy1mcmFnbWVudC5nbHNsJ1xuXG5cbi8vIFRoZSBNZWRpYSBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIDNEIG9iamVjdHMgdGhhdCB3aWxsIGJlIGRpc3BsYXllZCBvbiB0aGUgY2FudmFzXG4vLyBUaGUgTWVkaWEgY2xhc3MgaXMgaW1wb3J0ZWQgaW4gdGhlIEhvbWUgY2xhc3NcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoeyBlbGVtZW50LCBnZW9tZXRyeSwgZ2wsIHNjZW5lLCBpbmRleCwgc2l6ZXMgfSkge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQgXG4gICAgdGhpcy5nbCA9IGdsXG4gICAgdGhpcy5nZW9tZXRyeSA9IGdlb21ldHJ5XG4gICAgdGhpcy5zY2VuZSA9IHNjZW5lXG4gICAgdGhpcy5pbmRleCA9IGluZGV4XG4gICAgdGhpcy5zaXplcyA9IHNpemVzXG4gICAgdGhpcy5leHRyYSA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfVxuXG4gICAgdGhpcy5vcGFjaXR5ID0ge1xuICAgICAgY3VycmVudDogMCxcbiAgICAgIHRhcmdldDogMCxcbiAgICAgIGxlcnA6IDAuMSxcbiAgICAgIG11bHRpcGxpZXI6IDAsXG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVUZXh0dXJlKClcbiAgICB0aGlzLmNyZWF0ZVByb2dyYW0oKVxuICAgIHRoaXMuY3JlYXRlTWVzaCgpXG4gICAgdGhpcy5jcmVhdGVCb3VuZHMoeyBcbiAgICAgIHNpemVzOiB0aGlzLnNpemVzXG4gICAgfSlcblxuXG4gIH1cblxuICBjcmVhdGVUZXh0dXJlKCkge1xuICAgIGNvbnN0IGltYWdlID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xsZWN0aW9uc19fZ2FsbGVyeV9fbWVkaWFfX2ltYWdlJylcbiAgICBcbiAgICB0aGlzLnRleHR1cmUgPSB3aW5kb3cuVEVYVFVSRVNbaW1hZ2UuZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpXVxuICB9XG4gIGNyZWF0ZVByb2dyYW0oKSB7XG4gICAgdGhpcy5wcm9ncmFtID0gbmV3IFByb2dyYW0odGhpcy5nbCwge1xuICAgICAgZnJhZ21lbnQsXG4gICAgICB2ZXJ0ZXgsXG4gICAgICB1bmlmb3JtczogeyAvL3VzZWQgaW4gdGhlIGZyYWdtZW50IHNoYWRlciAocGxhbmUtZnJhZ21lbnQpXG4gICAgICAgIHRNYXA6IHsgdmFsdWU6IHRoaXMudGV4dHVyZSB9LFxuICAgICAgICB1QWxwaGE6IHsgdmFsdWU6IHRoaXMudGV4dHVyZSB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNyZWF0ZU1lc2goKSB7XG4gICAgdGhpcy5tZXNoID0gbmV3IE1lc2godGhpcy5nbCwge1xuICAgICAgZ2VvbWV0cnk6IHRoaXMuZ2VvbWV0cnksXG4gICAgICBwcm9ncmFtOiB0aGlzLnByb2dyYW1cbiAgICB9KVxuXG4gICAgdGhpcy5tZXNoLnNldFBhcmVudCh0aGlzLnNjZW5lKSAvLyBzZXQgdGhlIHBhcmVudCBvZiB0aGUgbWVzaCB0byB0aGUgc2NlbmVcblxuICB9XG4gIGNyZWF0ZUJvdW5kcyAoeyBzaXplcyB9KSB7XG4gICAgdGhpcy5zaXplcyA9IHNpemVzIC8vIHRoaXMgYWxsb3cgdG8gcmVzaXplIHRoZSBvYmplY3QgZGVwZW5kaW5nIG9uIHRoZSBzaXplIG9mIHRoZSB3aW5kb3cgYXZvaWRpbmcgc3RyZXRjaGluZyBvciBzaHJpbmtpbmcgdGhlIG9iamVjdFxuICAgIHRoaXMuYm91bmRzID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIC8vIGdldCB0aGUgc2l6ZSBvZiB0aGUgZWxlbWVudFxuXG4gICAgdGhpcy51cGRhdGVTY2FsZSAoc2l6ZXMpXG4gICAgdGhpcy51cGRhdGVYICgpXG4gICAgdGhpcy51cGRhdGVZICgpXG4gICAgfVxuIFxuICAgLyoqXG4gICAgKiBBbmltYXRpb25zXG4gICAgKi9cbiAgIHNob3coKSB7XG4gICAgIEdTQVAuZnJvbVRvKHRoaXMub3BhY2l0eSwge1xuICAgICAgIG11bHRpcGxpZXI6IDBcbiAgICAgfSwge1xuICAgICAgIG11bHRpcGxpZXI6IDEsXG5cbiAgICAgfSkgIFxuICAgfVxuIFxuICAgaGlkZSgpIHtcbiAgICAgR1NBUC50byh0aGlzLnByb2dyYW0udW5pZm9ybXMudUFscGhhLCB7XG4gICAgICAgbXVsdGlwbGllcjogMCwgXG5cbiAgICAgfSlcbiAgIH1cblxuICAvKipcbiAgKiBcbiAgKiBFdmVudHNcbiAgKi9cbiAgb25SZXNpemUoc2l6ZXMsIHNjcm9sbCkge1xuICAgIHRoaXMuZXh0cmEgPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMFxuICAgIH1cbiAgICB0aGlzLmNyZWF0ZUJvdW5kcyhzaXplcylcbiAgICB0aGlzLnVwZGF0ZVgoc2Nyb2xsICYmIHNjcm9sbC54KVxuICAgIHRoaXMudXBkYXRlWShzY3JvbGwgJiYgc2Nyb2xsLnkpXG4gIH1cbi8qKlxuICogVXBkYXRlIGxvb3BcbiAqL1xuICB1cGRhdGVTY2FsZSgpIHtcbiAgICB0aGlzLmhlaWdodCA9IHRoaXMuYm91bmRzLmhlaWdodCAvIHdpbmRvdy5pbm5lckhlaWdodFxuICAgIHRoaXMud2lkdGggPSB0aGlzLmJvdW5kcy53aWR0aCAvIHdpbmRvdy5pbm5lcldpZHRoXG5cbiAgICB0aGlzLm1lc2guc2NhbGUueCA9IHRoaXMuc2l6ZXMud2lkdGggKiB0aGlzLndpZHRoXG4gICAgdGhpcy5tZXNoLnNjYWxlLnkgPSB0aGlzLnNpemVzLmhlaWdodCAqIHRoaXMuaGVpZ2h0XG5cbiAgfVxuICBcbiAgdXBkYXRlWCh4ID0gMCkge1xuICAgIHRoaXMueCA9ICh0aGlzLmJvdW5kcy5sZWZ0ICsgeCkgLyB3aW5kb3cuaW5uZXJXaWR0aFxuICAgIHRoaXMubWVzaC5wb3NpdGlvbi54ID0gKC10aGlzLnNpemVzLndpZHRoIC8gMiApKyAodGhpcy5tZXNoLnNjYWxlLnggLyAyKSArICh0aGlzLnggKiB0aGlzLnNpemVzLndpZHRoKSArIHRoaXMuZXh0cmEueFxuICB9XG4gIFxuICB1cGRhdGVZKHkgPSAwKSB7XG4gICAgdGhpcy55ID0gKHRoaXMuYm91bmRzLnRvcCArIHkpIC8gd2luZG93LmlubmVySGVpZ2h0XG4gICAgdGhpcy5tZXNoLnBvc2l0aW9uLnkgPSAodGhpcy5zaXplcy5oZWlnaHQgLyAyKSAtICh0aGlzLm1lc2guc2NhbGUueSAvIDIpIC0gICh0aGlzLnkgKiB0aGlzLnNpemVzLmhlaWdodCkgKyB0aGlzLmV4dHJhLnlcbiAgfVxuXG4gIHVwZGF0ZShzY3JvbGwsIGluZGV4KSAge1xuICAgIHRoaXMudXBkYXRlWChzY3JvbGwpXG4gIFxuICAgIGNvbnN0IGFtcGxpdHVkZSA9IDAuMVxuICAgIGNvbnN0IGZyZXF1ZW5jeSA9IDFcblxuICAgIHRoaXMubWVzaC5yb3RhdGlvbi56ID0gLTAuMDIgKiBNYXRoLlBJICogTWF0aC5zaW4odGhpcy5pbmRleCAqIGZyZXF1ZW5jeSkgXG4gICAgdGhpcy5tZXNoLnBvc2l0aW9uLnkgPSBhbXBsaXR1ZGUgKiBNYXRoLnNpbih0aGlzLmluZGV4ICogZnJlcXVlbmN5KSBcblxuICAgIHRoaXMub3BhY2l0eS50YXJnZXQgPSBpbmRleCA9PT0gdGhpcy5pbmRleCA/IDEgOiAwLjRcbiAgICB0aGlzLm9wYWNpdHkuY3VycmVudCA9IEdTQVAudXRpbHMuaW50ZXJwb2xhdGUodGhpcy5vcGFjaXR5LmN1cnJlbnQsIHRoaXMub3BhY2l0eS50YXJnZXQsIHRoaXMub3BhY2l0eS5sZXJwKVxuXG4gICAgdGhpcy5wcm9ncmFtLnVuaWZvcm1zLnVBbHBoYS52YWx1ZSA9IHRoaXMub3BhY2l0eS5tdWx0aXBsaWVyICogdGhpcy5vcGFjaXR5LmN1cnJlbnRcblxuXG4gIH1cblxufSIsImV4cG9ydCBkZWZhdWx0IFwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbiNkZWZpbmUgR0xTTElGWSAxXFxuXFxudW5pZm9ybSBmbG9hdCB1QWxwaGE7XFxudW5pZm9ybSBzYW1wbGVyMkQgdE1hcDtcXG4gICBcXG52YXJ5aW5nIHZlYzQgdlBvc2l0aW9uO1xcbnZhcnlpbmcgdmVjMiB2VXY7XFxuXFxudm9pZCBtYWluKCkge1xcbiAgICB2ZWM0IHRleHR1cmUgPSB0ZXh0dXJlMkQodE1hcCwgdlV2KTtcXG5cXG4gICAgZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTsgLy8gc2V0IHRoZSBjb2xvciBvciB0ZXh0dXJlIG9mIHRoZSBjdWJlIHRvIHJlZFxcbiAgICBnbF9GcmFnQ29sb3IuYSA9IHVBbHBoYTtcXG59XCI7IiwiZXhwb3J0IGRlZmF1bHQgXCIjZGVmaW5lIEdMU0xJRlkgMVxcbiNkZWZpbmUgUEkgMy4xNDE1OTI2NTM1ODk3OTMyMzg0NjI2NDMzODMyNzk1XFxuXFxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzIgdXY7XFxuXFxudW5pZm9ybSBmbG9hdCB1U3BlZWQ7XFxudW5pZm9ybSB2ZWMyIHVWaWV3cG9ydFNpemVzO1xcblxcbnVuaWZvcm0gbWF0NCBtb2RlbFZpZXdNYXRyaXg7XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb25NYXRyaXg7XFxuXFxudmFyeWluZyB2ZWM0IHZQb3NpdGlvbjtcXG52YXJ5aW5nIHZlYzIgdlV2O1xcblxcbnZvaWQgbWFpbigpIHtcXG4gIHZVdiA9IHV2O1xcblxcbiAgdmVjNCBuZXdQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHZlYzQocG9zaXRpb24sIDEuMCk7IC8vIG1vZGV2aWV3TWF0cml4IG11bHRpcGx5IGJ5IHRoZSBwb3NpdGlvbiBvZiB0aGUgdmVydGV4XFxuXFxudlBvc2l0aW9uID0gbmV3UG9zaXRpb247XFxuXFxuICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBuZXdQb3NpdGlvbjtcXG59XCI7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiZDdjNmJmYjhhYjUyMjczZGM3YmZcIikiXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJnbCIsInNjZW5lIiwic2l6ZXMiLCJ0cmFuc2l0aW9uIiwidGhpcyIsImlkIiwidHJhbnNmb3JtUHJlZml4IiwiUHJlZml4IiwiZ3JvdXAiLCJUcmFuc2Zvcm0iLCJnYWxsZXJ5RWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImdhbGxlcnlFbGVtZW50V3JhcHBlciIsInRpdGxlc0VsZW1lbnQiLCJjb2xsZWN0aW9uc0VsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsImNvbGxlY3Rpb25zRWxlbWVudHNBY3RpdmUiLCJtZWRpYXNFbGVtZW50cyIsImZvckVhY2giLCJsaW5rIiwic2Nyb2xsIiwiY3VycmVudCIsInRhcmdldCIsInN0YXJ0IiwibGVycCIsInZlbG9jaXR5IiwiY3JlYXRlR2VvbWV0cnkiLCJjcmVhdGVHYWxsZXJ5Iiwib25SZXNpemUiLCJzZXRQYXJlbnQiLCJzaG93IiwiZ2VvbWV0cnkiLCJQbGFuZSIsIm1lZGlhcyIsIm1hcCIsImVsZW1lbnQiLCJpbmRleCIsIk1lZGlhIiwibWVkaWEiLCJvcGFjaXR5IiwibXVsdGlwbGllciIsInNyYyIsIm1lc2giLCJwcm9ncmFtIiwidW5pZm9ybXMiLCJ0TWFwIiwidmFsdWUiLCJpbWFnZSIsInRleHR1cmUiLCJ3aW5kb3ciLCJURVhUVVJFUyIsImZpbmQiLCJHU0FQIiwiZGVsYXllZENhbGwiLCJfIiwibGFzdCIsInBvc2l0aW9uIiwieCIsImFuaW1hdGUiLCJoaWRlIiwiZXZlbnQiLCJib3VuZHMiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsaW1pdCIsIndpZHRoIiwiY2xpZW50V2lkdGgiLCJvblRvdWNoRG93biIsInkiLCJvblRvdWNoTW92ZSIsImRpc3RhbmNlIiwiZW5kIiwib25Ub3VjaFVwIiwib25XaGVlbCIsInBpeGVsWSIsIm9uQ2hhbmdlIiwic2VsZWN0ZWRDb2xsZWN0aW9uIiwicGFyc2VJbnQiLCJnZXRBdHRyaWJ1dGUiLCJlbGVtZW50SW5kZXgiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJzdHlsZSIsInVwZGF0ZSIsInV0aWxzIiwiY2xhbXAiLCJpbnRlcnBvbGF0ZSIsImRpcmVjdGlvbiIsIk1hdGgiLCJmbG9vciIsImFicyIsImxlbmd0aCIsImRlc3Ryb3kiLCJyZW1vdmVDaGlsZCIsImV4dHJhIiwiY3JlYXRlVGV4dHVyZSIsImNyZWF0ZVByb2dyYW0iLCJjcmVhdGVNZXNoIiwiY3JlYXRlQm91bmRzIiwiUHJvZ3JhbSIsImZyYWdtZW50IiwidmVydGV4IiwidUFscGhhIiwiTWVzaCIsInVwZGF0ZVNjYWxlIiwidXBkYXRlWCIsInVwZGF0ZVkiLCJmcm9tVG8iLCJ0byIsImhlaWdodCIsImlubmVySGVpZ2h0IiwiaW5uZXJXaWR0aCIsInNjYWxlIiwibGVmdCIsInRvcCIsInJvdGF0aW9uIiwieiIsIlBJIiwic2luIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9