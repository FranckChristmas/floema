/*! For license information please see main.7be9df19a3964ef5bc37.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/components/Canvas/Collections/Index.js":(e,s,t)=>{t.r(s),t.d(s,{default:()=>n});var i=t("./app/components/Canvas/Collections/Media.js"),h=t("./node_modules/lodash/map.js"),r=t.n(h),l=t("./node_modules/ogl/src/core/Transform.js"),o=t("./node_modules/ogl/src/extras/Plane.js"),a=t("./node_modules/gsap/index.js");const n=class{constructor({gl:e,scene:s,sizes:t}){this.gl=e,this.sizes=t,this.scene=s,this.group=new l.Transform,this.galleryElement=document.querySelector(".collections__gallery__wrapper"),this.mediaElements=document.querySelectorAll(".collections__gallery__media"),this.scroll={current:0,target:0,start:0,lerp:.1,velocity:1},this.createGeometry(),this.createGallery(),this.group.setParent(this.scene),this.show()}createGeometry(){this.geometry=new o.Plane(this.gl)}createGallery(){this.medias=r()(this.mediaElements,((e,s)=>new i.default({element:e,geometry:this.geometry,index:s,gl:this.gl,scene:this.group,sizes:this.sizes})))}show(){r()(this.medias,(e=>e.show()))}hide(){r()(this.medias,(e=>e.hide()))}onResize(e){this.bounds=this.galleryElement.getBoundingClientRect(),this.width=this.bounds.width/window.innerWidth*this.sizes.width,this.scroll.x=this.scroll.target=0,this.sizes=e.sizes,r()(this.medias,(s=>s.onResize(e,this.scroll)))}onTouchDown({x:e,y:s}){this.scroll.last=this.scroll.current}onTouchMove({x:e,y:s}){const t=e.start-e.end;this.scroll.target=this.scroll.last-t}onTouchUp({x:e,y:s}){}onWheel({pixelY:e}){this.scroll.target-=e}update(){this.bounds&&(this.scroll.target=a.default.utils.clamp(-1e3,0,this.scroll.target),this.scroll.current=a.default.utils.interpolate(this.scroll.current,this.scroll.target,this.scroll.lerp),this.scroll.last<this.scroll.current?this.scroll.direction="right":this.scroll.last>this.scroll.current&&(this.scroll.direction="left"),this.scroll.last=this.scroll.current,r()(this.medias,((e,s)=>{e.update(this.scroll.current)})))}destroy(){this.scene.removeChild(this.group)}}},"./app/components/Canvas/Collections/Media.js":(e,s,t)=>{t.r(s),t.d(s,{default:()=>n});var i=t("./node_modules/ogl/src/core/Texture.js"),h=t("./node_modules/ogl/src/core/Program.js"),r=t("./node_modules/ogl/src/core/Mesh.js"),l=t("./node_modules/gsap/index.js"),o=t("./app/shaders/plane-vertex.glsl"),a=t("./app/shaders/plane-fragment.glsl");const n=class{constructor({element:e,geometry:s,gl:t,scene:i,index:h,sizes:r}){this.element=e,this.gl=t,this.geometry=s,this.scene=i,this.index=h,this.sizes=r,this.createTexture(),this.createProgram(),this.createMesh(),this.extra={x:0,y:0}}createTexture(){const e=this.element.querySelector(".collections__gallery__media__image");this.texture=new i.Texture(this.gl),this.image=new window.Image,this.image.crossOrigin="anonymous",this.image.src=e.getAttribute("data-src"),this.image.onload=e=>this.texture.image=this.image}createProgram(){this.program=new h.Program(this.gl,{fragment:a.default,vertex:o.default,uniforms:{tMap:{value:this.texture},uAlpha:{value:this.texture}}})}createMesh(){this.mesh=new r.Mesh(this.gl,{geometry:this.geometry,program:this.program}),this.mesh.setParent(this.scene)}createBounds({sizes:e}){this.sizes=e,this.bounds=this.element.getBoundingClientRect(),this.updateScale(e),this.updateX(),this.updateY()}show(){l.default.fromTo(this.program.uniforms.uAlpha,{value:0},{value:1})}hide(){l.default.to(this.program.uniforms.uAlpha,{value:0})}onResize(e,s){this.extra={x:0,y:0},this.createBounds(e),this.updateX(s&&s.x),this.updateY(s&&s.y)}updateScale(){this.height=this.bounds.height/window.innerHeight,this.width=this.bounds.width/window.innerWidth,this.mesh.scale.x=this.sizes.width*this.width,this.mesh.scale.y=this.sizes.height*this.height}updateX(e=0){this.x=(this.bounds.left+e)/window.innerWidth,this.mesh.position.x=-this.sizes.width/2+this.mesh.scale.x/2+this.x*this.sizes.width+this.extra.x}updateY(e=0){this.y=(this.bounds.top+e)/window.innerHeight,this.mesh.position.y=this.sizes.height/2-this.mesh.scale.y/2-this.y*this.sizes.height+this.extra.y}update(e){this.bounds&&(this.updateX(e),this.updateY())}}}},(function(e){e.h=()=>"f94c0f1b8737043791ba"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU1nQyxNQUFTL0IsS0FBS3VELE1BQU1yQixDQUl0SCxDQUVBNEMsT0FBQUEsQ0FBUTFDLEVBQUksR0FDVnBDLEtBQUtvQyxHQUFLcEMsS0FBSzZCLE9BQU95RCxJQUFNbEQsR0FBS0osT0FBT2tELFlBQ3hDbEYsS0FBS3lFLEtBQUtZLFNBQVNqRCxFQUFLcEMsS0FBS0QsTUFBTWtGLE9BQVMsRUFBTWpGLEtBQUt5RSxLQUFLVSxNQUFNL0MsRUFBSSxFQUFPcEMsS0FBS29DLEVBQUlwQyxLQUFLRCxNQUFNa0YsT0FBVWpGLEtBQUt1RCxNQUFNbkIsQ0FJeEgsQ0FDQVEsTUFBQUEsQ0FBT3BDLEdBQ0FSLEtBQUs2QixTQUNWN0IsS0FBSzZFLFFBQVFyRSxHQUNiUixLQUFLOEUsVUFDUCxrQkNwSUZTLEVBQW9CQyxFQUFJLElBQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mbG9lbWEvLi9hcHAvY29tcG9uZW50cy9DYW52YXMvQ29sbGVjdGlvbnMvSW5kZXguanMiLCJ3ZWJwYWNrOi8vZmxvZW1hLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL0NvbGxlY3Rpb25zL01lZGlhLmpzIiwid2VicGFjazovL2Zsb2VtYS93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE1lZGlhIGZyb20gJy4vTWVkaWEnXG5pbXBvcnQgbWFwIGZyb20gJ2xvZGFzaC9tYXAnXG5pbXBvcnQgeyBQbGFuZSwgVHJhbnNmb3JtIH0gZnJvbSAnb2dsJ1xuaW1wb3J0IEdTQVAgZnJvbSAnZ3NhcCdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcih7IGdsLCBzY2VuZSwgc2l6ZXMgfSkge1xuICAgIHRoaXMuZ2wgPSBnbFxuICAgIHRoaXMuc2l6ZXMgPSBzaXplc1xuICAgIHRoaXMuc2NlbmUgPSBzY2VuZVxuXG4gICAgdGhpcy5ncm91cCA9IG5ldyBUcmFuc2Zvcm0oKTtcblxuICAgIHRoaXMuZ2FsbGVyeUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29sbGVjdGlvbnNfX2dhbGxlcnlfX3dyYXBwZXInKTtcbiAgICB0aGlzLm1lZGlhRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29sbGVjdGlvbnNfX2dhbGxlcnlfX21lZGlhJyk7XG5cbiAgICB0aGlzLnNjcm9sbCA9IHtcbiAgICAgIGN1cnJlbnQ6IDAsXG4gICAgICB0YXJnZXQ6IDAsXG4gICAgICBzdGFydDogMCxcbiAgICAgIGxlcnA6IDAuMSxcbiAgICAgIHZlbG9jaXR5OiAxLFxuICAgIH1cblxuICAgIHRoaXMuY3JlYXRlR2VvbWV0cnkoKTtcbiAgICB0aGlzLmNyZWF0ZUdhbGxlcnkoKTtcblxuICAgIHRoaXMuZ3JvdXAuc2V0UGFyZW50KHRoaXMuc2NlbmUpXG5cbiAgICB0aGlzLnNob3coKVxuICB9XG5cbiAgY3JlYXRlR2VvbWV0cnkoKSB7XG4gICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBQbGFuZSh0aGlzLmdsKVxuICB9XG5cbiAgY3JlYXRlR2FsbGVyeSgpIHtcbiAgICB0aGlzLm1lZGlhcyA9IG1hcCh0aGlzLm1lZGlhRWxlbWVudHMsIChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBNZWRpYSh7XG4gICAgICAgIGVsZW1lbnQsXG4gICAgICAgIGdlb21ldHJ5OiB0aGlzLmdlb21ldHJ5LFxuICAgICAgICBpbmRleCxcbiAgICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICAgIHNjZW5lOiB0aGlzLmdyb3VwLFxuICAgICAgICBzaXplczogdGhpcy5zaXplcywgIFxuICAgICAgfSlcblxuICAgIH0pXG4gIH1cbiAgICAgIC8qKlxuICAgICAqIEFuaW1hdGlvbnNcbiAgICAgKi9cbiAgICAgIHNob3coKSB7XG4gICAgICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEuc2hvdygpKVxuICAgICAgIH0gIFxuICAgICAgIGhpZGUoKSB7XG4gICAgICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEuaGlkZSgpKVxuICAgICAgIH1cbiAgICBcbiAgLyoqXG4gICAqIFxuICAgKiBldmVudHNcbiAgICovXG4gIG9uUmVzaXplKCBldmVudCApIHtcbiAgICBcbiAgICB0aGlzLmJvdW5kcyA9IHRoaXMuZ2FsbGVyeUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7IC8vIGdldCB0aGUgc2l6ZSBvZiB0aGUgZ2FsbGVyeSBlbGVtZW50XG4gICAgXG4gICAgdGhpcy53aWR0aCA9IHRoaXMuYm91bmRzLndpZHRoIC8gd2luZG93LmlubmVyV2lkdGggKiB0aGlzLnNpemVzLndpZHRoXG4gIFxuICAgIHRoaXMuc2Nyb2xsLnggPSB0aGlzLnNjcm9sbC50YXJnZXQgPSAwXG5cbiAgICB0aGlzLnNpemVzID0gZXZlbnQuc2l6ZXM7XG4gICAgbWFwKHRoaXMubWVkaWFzLCBtZWRpYSA9PiBtZWRpYS5vblJlc2l6ZSggZXZlbnQsIHRoaXMuc2Nyb2xsICkpXG4gICAgfVxuICBcbiAgb25Ub3VjaERvd24gKHsgeCwgeSB9KSB7IFxuICAgIHRoaXMuc2Nyb2xsLmxhc3QgPSB0aGlzLnNjcm9sbC5jdXJyZW50XG4gIH1cblxuICBvblRvdWNoTW92ZSAoeyB4LCB5IH0pIHtcbiAgICBjb25zdCBkaXN0YW5jZSA9IHguc3RhcnQgLSB4LmVuZFxuXG4gICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gdGhpcy5zY3JvbGwubGFzdCAtIGRpc3RhbmNlXG4gIH1cblxuICBvblRvdWNoVXAgKHsgeCwgeSB9KSB7XG4gIH1cblxuICBvbldoZWVsKHsgcGl4ZWxZIH0pIHtcbiAgICB0aGlzLnNjcm9sbC50YXJnZXQgLT0gcGl4ZWxZICAvLyByZXZlcnNlZCBkb3duIGFuZCB1cCB0aGUgc2Nyb2xsIGRpcmVjdGlvblxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZVxuICAgKi9cbiAgdXBkYXRlKCkge1xuICAgIGlmICghdGhpcy5ib3VuZHMpIHJldHVyblxuXG4gICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gR1NBUC51dGlscy5jbGFtcCgtMTAwMCwwLCB0aGlzLnNjcm9sbC50YXJnZXQpXG5cbiAgICB0aGlzLnNjcm9sbC5jdXJyZW50ID0gR1NBUC51dGlscy5pbnRlcnBvbGF0ZSh0aGlzLnNjcm9sbC5jdXJyZW50LCB0aGlzLnNjcm9sbC50YXJnZXQsIHRoaXMuc2Nyb2xsLmxlcnApIFxuXG4gICAgaWYodGhpcy5zY3JvbGwubGFzdCA8IHRoaXMuc2Nyb2xsLmN1cnJlbnQpIHtcbiAgICAgIHRoaXMuc2Nyb2xsLmRpcmVjdGlvbiA9ICdyaWdodCdcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2Nyb2xsLmxhc3QgPiB0aGlzLnNjcm9sbC5jdXJyZW50KSB7XG4gICAgICB0aGlzLnNjcm9sbC5kaXJlY3Rpb24gPSAnbGVmdCdcbiAgICB9XG5cbiAgICB0aGlzLnNjcm9sbC5sYXN0ID0gdGhpcy5zY3JvbGwuY3VycmVudFxuXG4gICAgbWFwKHRoaXMubWVkaWFzLCAobWVkaWEsIGluZGV4KSA9PiB7XG4gICAgICBtZWRpYS51cGRhdGUodGhpcy5zY3JvbGwuY3VycmVudClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3lcbiAgICovXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5zY2VuZS5yZW1vdmVDaGlsZCh0aGlzLmdyb3VwKVxuICB9XG59IiwiaW1wb3J0IHtNZXNoLCBUZXh0dXJlLCBQcm9ncmFtfSBmcm9tICdvZ2wnXG5pbXBvcnQgR1NBUCBmcm9tICdnc2FwJ1xuaW1wb3J0IHZlcnRleCBmcm9tICdzaGFkZXJzL3BsYW5lLXZlcnRleC5nbHNsJ1xuaW1wb3J0IGZyYWdtZW50IGZyb20gJ3NoYWRlcnMvcGxhbmUtZnJhZ21lbnQuZ2xzbCdcblxuLy8gVGhlIE1lZGlhIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGUgM0Qgb2JqZWN0cyB0aGF0IHdpbGwgYmUgZGlzcGxheWVkIG9uIHRoZSBjYW52YXNcbi8vIFRoZSBNZWRpYSBjbGFzcyBpcyBpbXBvcnRlZCBpbiB0aGUgSG9tZSBjbGFzc1xuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcih7IGVsZW1lbnQsIGdlb21ldHJ5LCBnbCwgc2NlbmUsIGluZGV4LCBzaXplcyB9KSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudCBcbiAgICB0aGlzLmdsID0gZ2xcbiAgICB0aGlzLmdlb21ldHJ5ID0gZ2VvbWV0cnlcbiAgICB0aGlzLnNjZW5lID0gc2NlbmVcbiAgICB0aGlzLmluZGV4ID0gaW5kZXhcbiAgICB0aGlzLnNpemVzID0gc2l6ZXNcblxuICAgIHRoaXMuY3JlYXRlVGV4dHVyZSgpXG4gICAgdGhpcy5jcmVhdGVQcm9ncmFtKClcbiAgICB0aGlzLmNyZWF0ZU1lc2goKVxuXG4gICAgdGhpcy5leHRyYSA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfVxuICB9XG5cbiAgY3JlYXRlVGV4dHVyZSgpIHtcbiAgICBjb25zdCBpbWFnZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY29sbGVjdGlvbnNfX2dhbGxlcnlfX21lZGlhX19pbWFnZScpXG4gICAgXG4gICAgdGhpcy50ZXh0dXJlID0gbmV3IFRleHR1cmUodGhpcy5nbClcblxuICAgIHRoaXMuaW1hZ2UgPSBuZXcgd2luZG93LkltYWdlKClcbiAgICB0aGlzLmltYWdlLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cydcbiAgICB0aGlzLmltYWdlLnNyYyA9IGltYWdlLmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKVxuICAgIHRoaXMuaW1hZ2Uub25sb2FkID0gXyA9PiAodGhpcy50ZXh0dXJlLmltYWdlID0gdGhpcy5pbWFnZSlcblxuICB9XG4gIGNyZWF0ZVByb2dyYW0oKSB7XG4gICAgdGhpcy5wcm9ncmFtID0gbmV3IFByb2dyYW0odGhpcy5nbCwge1xuICAgICAgZnJhZ21lbnQsXG4gICAgICB2ZXJ0ZXgsXG4gICAgICB1bmlmb3JtczogeyAvL3VzZWQgaW4gdGhlIGZyYWdtZW50IHNoYWRlciAocGxhbmUtZnJhZ21lbnQpXG4gICAgICAgIHRNYXA6IHsgdmFsdWU6IHRoaXMudGV4dHVyZSB9LFxuICAgICAgICB1QWxwaGE6IHsgdmFsdWU6IHRoaXMudGV4dHVyZSB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNyZWF0ZU1lc2goKSB7XG4gICAgdGhpcy5tZXNoID0gbmV3IE1lc2godGhpcy5nbCwge1xuICAgICAgZ2VvbWV0cnk6IHRoaXMuZ2VvbWV0cnksXG4gICAgICBwcm9ncmFtOiB0aGlzLnByb2dyYW1cbiAgICB9KVxuXG4gICAgdGhpcy5tZXNoLnNldFBhcmVudCh0aGlzLnNjZW5lKSAvLyBzZXQgdGhlIHBhcmVudCBvZiB0aGUgbWVzaCB0byB0aGUgc2NlbmVcblxuICB9XG4gIGNyZWF0ZUJvdW5kcyAoeyBzaXplcyB9KSB7XG4gICAgdGhpcy5zaXplcyA9IHNpemVzIC8vIHRoaXMgYWxsb3cgdG8gcmVzaXplIHRoZSBvYmplY3QgZGVwZW5kaW5nIG9uIHRoZSBzaXplIG9mIHRoZSB3aW5kb3cgYXZvaWRpbmcgc3RyZXRjaGluZyBvciBzaHJpbmtpbmcgdGhlIG9iamVjdFxuICAgIHRoaXMuYm91bmRzID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIC8vIGdldCB0aGUgc2l6ZSBvZiB0aGUgZWxlbWVudFxuXG4gICAgdGhpcy51cGRhdGVTY2FsZSAoc2l6ZXMpXG4gICAgdGhpcy51cGRhdGVYICgpXG4gICAgdGhpcy51cGRhdGVZICgpXG4gICAgfVxuIFxuICAgLyoqXG4gICAgKiBBbmltYXRpb25zXG4gICAgKi9cbiAgIHNob3coKSB7XG4gICAgIEdTQVAuZnJvbVRvKHRoaXMucHJvZ3JhbS51bmlmb3Jtcy51QWxwaGEsIHtcbiAgICAgICB2YWx1ZTogMFxuICAgICB9LCB7XG4gICAgICAgdmFsdWU6IDEsXG4gICAgICAgLy8gZHVyYXRpb246IDEsXG4gICAgICAgLy8gZGVsYXk6IDFcbiAgICAgfSkgIFxuICAgfVxuIFxuICAgaGlkZSgpIHtcbiAgICAgR1NBUC50byh0aGlzLnByb2dyYW0udW5pZm9ybXMudUFscGhhLCB7XG4gICAgICAgdmFsdWU6IDAsIFxuICAgICAgIC8vIGR1cmF0aW9uOiAxLFxuICAgICAgIC8vIGRlbGF5OiAxXG4gICAgIH0pXG4gICB9XG5cbiAgLyoqXG4gICogXG4gICogRXZlbnRzXG4gICovXG4gIG9uUmVzaXplKHNpemVzLCBzY3JvbGwpIHtcbiAgICB0aGlzLmV4dHJhID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDBcbiAgICB9XG4gICAgdGhpcy5jcmVhdGVCb3VuZHMoc2l6ZXMpXG4gICAgdGhpcy51cGRhdGVYKHNjcm9sbCAmJiBzY3JvbGwueClcbiAgICB0aGlzLnVwZGF0ZVkoc2Nyb2xsICYmIHNjcm9sbC55KVxuICB9XG4vKipcbiAqIFVwZGF0ZSBsb29wXG4gKi9cbiAgdXBkYXRlU2NhbGUoKSB7XG4gICAgdGhpcy5oZWlnaHQgPSB0aGlzLmJvdW5kcy5oZWlnaHQgLyB3aW5kb3cuaW5uZXJIZWlnaHRcbiAgICB0aGlzLndpZHRoID0gdGhpcy5ib3VuZHMud2lkdGggLyB3aW5kb3cuaW5uZXJXaWR0aFxuXG4gICAgdGhpcy5tZXNoLnNjYWxlLnggPSB0aGlzLnNpemVzLndpZHRoICogdGhpcy53aWR0aFxuICAgIHRoaXMubWVzaC5zY2FsZS55ID0gdGhpcy5zaXplcy5oZWlnaHQgKiB0aGlzLmhlaWdodFxuXG4gICAvLyBjb25zb2xlLmxvZyhcInRlc3QgZHUgc2NhbGVcIiwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpXG4gIH1cbiAgXG4gIHVwZGF0ZVgoeCA9IDApIHtcbiAgICB0aGlzLnggPSAodGhpcy5ib3VuZHMubGVmdCArIHgpIC8gd2luZG93LmlubmVyV2lkdGhcbiAgICB0aGlzLm1lc2gucG9zaXRpb24ueCA9ICgtdGhpcy5zaXplcy53aWR0aCAvIDIgKSsgKHRoaXMubWVzaC5zY2FsZS54IC8gMikgKyAodGhpcy54ICogdGhpcy5zaXplcy53aWR0aCkgKyB0aGlzLmV4dHJhLnhcbiAgICBcbiAgICAvLyBjb25zb2xlLmxvZyhcInRlc3QgZHUgbWVzaCBwb3NpdGlvbiB4XCIsIHRoaXMubWVzaC5wb3NpdGlvbi54KVxuICAgIC8vIGNvbnNvbGUubG9nKFwidGVzdCBkdSB4XCIsIHRoaXMueClcbiAgfVxuICBcbiAgdXBkYXRlWSh5ID0gMCkge1xuICAgIHRoaXMueSA9ICh0aGlzLmJvdW5kcy50b3AgKyB5KSAvIHdpbmRvdy5pbm5lckhlaWdodFxuICAgIHRoaXMubWVzaC5wb3NpdGlvbi55ID0gKHRoaXMuc2l6ZXMuaGVpZ2h0IC8gMikgLSAodGhpcy5tZXNoLnNjYWxlLnkgLyAyKSAtICAodGhpcy55ICogdGhpcy5zaXplcy5oZWlnaHQpICsgdGhpcy5leHRyYS55XG5cbiAgICAvLyBjb25zb2xlLmxvZyhcInRlc3QgZHUgbWVzaCBwb3NpdGlvbiB5XCIsIHRoaXMubWVzaC5wb3NpdGlvbi55KVxuICAgIC8vIGNvbnNvbGUubG9nKFwidGVzdCBkdSB5XCIsIHRoaXMueSlcbiAgfVxuICB1cGRhdGUoc2Nyb2xsKSAge1xuICAgIGlmICghdGhpcy5ib3VuZHMpIHJldHVyblxuICAgIHRoaXMudXBkYXRlWChzY3JvbGwpXG4gICAgdGhpcy51cGRhdGVZKClcbiAgfVxuXG59IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiZjk0YzBmMWI4NzM3MDQzNzkxYmFcIikiXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJnbCIsInNjZW5lIiwic2l6ZXMiLCJ0aGlzIiwiZ3JvdXAiLCJUcmFuc2Zvcm0iLCJnYWxsZXJ5RWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1lZGlhRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2Nyb2xsIiwiY3VycmVudCIsInRhcmdldCIsInN0YXJ0IiwibGVycCIsInZlbG9jaXR5IiwiY3JlYXRlR2VvbWV0cnkiLCJjcmVhdGVHYWxsZXJ5Iiwic2V0UGFyZW50Iiwic2hvdyIsImdlb21ldHJ5IiwiUGxhbmUiLCJtZWRpYXMiLCJtYXAiLCJlbGVtZW50IiwiaW5kZXgiLCJNZWRpYSIsIm1lZGlhIiwiaGlkZSIsIm9uUmVzaXplIiwiZXZlbnQiLCJib3VuZHMiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJ4Iiwib25Ub3VjaERvd24iLCJ5IiwibGFzdCIsIm9uVG91Y2hNb3ZlIiwiZGlzdGFuY2UiLCJlbmQiLCJvblRvdWNoVXAiLCJvbldoZWVsIiwicGl4ZWxZIiwidXBkYXRlIiwiR1NBUCIsInV0aWxzIiwiY2xhbXAiLCJpbnRlcnBvbGF0ZSIsImRpcmVjdGlvbiIsImRlc3Ryb3kiLCJyZW1vdmVDaGlsZCIsImNyZWF0ZVRleHR1cmUiLCJjcmVhdGVQcm9ncmFtIiwiY3JlYXRlTWVzaCIsImV4dHJhIiwiaW1hZ2UiLCJ0ZXh0dXJlIiwiVGV4dHVyZSIsIkltYWdlIiwiY3Jvc3NPcmlnaW4iLCJzcmMiLCJnZXRBdHRyaWJ1dGUiLCJvbmxvYWQiLCJfIiwicHJvZ3JhbSIsIlByb2dyYW0iLCJmcmFnbWVudCIsInZlcnRleCIsInVuaWZvcm1zIiwidE1hcCIsInZhbHVlIiwidUFscGhhIiwibWVzaCIsIk1lc2giLCJjcmVhdGVCb3VuZHMiLCJ1cGRhdGVTY2FsZSIsInVwZGF0ZVgiLCJ1cGRhdGVZIiwiZnJvbVRvIiwidG8iLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsInNjYWxlIiwibGVmdCIsInBvc2l0aW9uIiwidG9wIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9