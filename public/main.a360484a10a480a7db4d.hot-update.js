/*! For license information please see main.a360484a10a480a7db4d.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/components/Canvas/Collections/Index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>a}),Object(function(){var e=new Error("Cannot find module './Media'");throw e.code="MODULE_NOT_FOUND",e}());var i=s("./node_modules/lodash/map.js"),h=s.n(i),o=s("./node_modules/ogl/src/core/Transform.js"),n=s("./node_modules/ogl/src/extras/Plane.js"),r=s("./node_modules/gsap/index.js");class a{constructor({gl:e,scene:t,sizes:s}){this.gl=e,this.sizes=s,this.scene=t,this.group=new o.Transform,this.galleryElement=document.querySelector(".home__gallery"),this.mediaElements=document.querySelectorAll(".home__gallery__media__image"),this.x={current:0,target:0,lerp:.1},this.y={current:0,target:0,lerp:.1},this.scrollCurrent={x:0,y:0},this.scroll={x:0,y:0},this.createGeometry(),this.createGallery(),this.group.setParent(this.scene),this.show()}createGeometry(){this.geometry=new n.Plane(this.gl)}createGallery(){this.medias=h()(this.mediaElements,((e,t)=>new Object(function(){var e=new Error("Cannot find module './Media'");throw e.code="MODULE_NOT_FOUND",e}())({element:e,geometry:this.geometry,index:t,gl:this.gl,scene:this.group,sizes:this.sizes})))}show(){h()(this.medias,(e=>e.show()))}hide(){h()(this.medias,(e=>e.hide()))}onResize(e){this.galleryBounds=this.galleryElement.getBoundingClientRect(),this.gallerySizes={height:this.galleryBounds.height/window.innerHeight*this.sizes.height,width:this.galleryBounds.width/window.innerWidth*this.sizes.width},this.scroll.x=this.x.target=0,this.scroll.y=this.y.target=0,this.sizes=e.sizes,h()(this.medias,(t=>t.onResize(e,this.scroll)))}onTouchDown({x:e,y:t}){this.scrollCurrent.x=this.scroll.x,this.scrollCurrent.y=this.scroll.y}onTouchMove({x:e,y:t}){const s=e.start-e.end,i=t.start-t.end;this.x.target=this.scrollCurrent.x-s,this.y.target=this.scrollCurrent.y-i}onTouchUp({x:e,y:t}){}onWheel({pixelX:e,pixelY:t}){this.x.target+=e,this.y.target-=t}update(){this.galleryBounds&&(this.x.current=r.default.utils.interpolate(this.x.current,this.x.target,this.x.lerp),this.y.current=r.default.utils.interpolate(this.y.current,this.y.target,this.y.lerp),this.scroll.x<this.x.current?this.x.direction="right":this.scroll.x>this.x.current&&(this.x.direction="left"),this.scroll.y<this.y.current?this.y.direction="top":this.scroll.y>this.y.current&&(this.y.direction="bottom"),this.scroll.x=this.x.current,this.scroll.y=this.y.current,h()(this.medias,((e,t)=>{const s=e.mesh.scale.x/2;if("left"===this.x.direction){e.mesh.position.x+s<-this.sizes.width/2&&(e.extra.x+=this.gallerySizes.width,e.mesh.rotation.z=r.default.utils.random(.02*-Math.PI,.02*Math.PI))}else if("right"===this.x.direction){e.mesh.position.x-s>this.sizes.width/2&&(e.extra.x-=this.gallerySizes.width,e.mesh.rotation.z=r.default.utils.random(.02*-Math.PI,.02*Math.PI))}const i=e.mesh.scale.y/2;if("top"===this.y.direction){e.mesh.position.y+i<-this.sizes.height/2&&(e.extra.y+=this.gallerySizes.height,e.mesh.rotation.z=r.default.utils.random(.02*-Math.PI,.02*Math.PI))}else if("bottom"===this.y.direction){e.mesh.position.y-i>this.sizes.height/2&&(e.extra.y-=this.gallerySizes.height,e.mesh.rotation.z=r.default.utils.random(.02*-Math.PI,.02*Math.PI))}e.update(this.scroll)})))}destroy(){this.scene.removeChild(this.group)}}},"./app/components/Canvas/Index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var i=s("./node_modules/ogl/src/core/Renderer.js"),h=s("./node_modules/ogl/src/core/Camera.js"),o=s("./node_modules/ogl/src/core/Transform.js"),n=s("./app/components/Canvas/Home/Index.js"),r=s("./app/components/Canvas/About/Index.js"),a=s("./app/components/Canvas/Collections/Index.js");class l{constructor({template:e}){this.template=e,this.x={start:0,distance:0,end:0},this.y={start:0,distance:0,end:0},this.createCamera(),this.createRenderer(),this.createScene(),this.onResize(),this.onChangeEnd(this.template)}createRenderer(){this.renderer=new i.Renderer({alpha:!0,antialias:!0}),this.gl=this.renderer.gl,document.body.appendChild(this.gl.canvas)}createCamera(){this.camera=new h.Camera(this.gl),this.camera.position.z=5}createScene(){this.scene=new o.Transform}createHome(){this.home=new n.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyHome(){this.home&&(this.home.destroy(),this.home=null)}createCollections(){this.collections=new a.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyCollections(){this.collections&&(this.collections.destroy(),this.collections=null)}createAbout(){this.about=new r.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyAbout(){this.about&&(this.about.destroy(),this.about=null)}onChangeStart(){this.about&&this.about.hide(),this.home&&this.home.hide()}onChangeEnd(e){"about"===e?this.createAbout():this.destroyAbout(),"home"===e?this.createHome():this.destroyHome()}onResize(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.perspective({aspect:window.innerWidth/window.innerHeight});const e=this.camera.fov*(Math.PI/180),t=2*Math.tan(e/2)*this.camera.position.z,s=t*this.camera.aspect;this.sizes={height:t,width:s};const i={sizes:this.sizes};this.about&&this.about.onResize(i),this.home&&this.home.onResize(i)}onTouchDown(e){this.isDown=!0,this.x.start=e.touches?e.touches[0].clientX:e.clientX,this.y.start=e.touches?e.touches[0].clientY:e.clientY;const t={x:this.x,y:this.y};this.about&&this.about.onTouchDown(t),this.home&&this.home.onTouchDown(t)}onTouchMove(e){if(!this.isDown)return;const t=e.touches?e.touches[0].clientX:e.clientX,s=e.touches?e.touches[0].clientY:e.clientY;this.x.end=t,this.y.end=s;const i={x:this.x,y:this.y};this.about&&this.about.onTouchMove(i),this.home&&this.home.onTouchMove(i)}onTouchUp(e){this.isDown=!1;const t=e.changedTouches?e.changedTouches[0].clientX:e.clientX,s=e.changedTouches?e.changedTouches[0].clientY:e.clientY;this.x.end=t,this.y.end=s;const i={x:this.x,y:this.y};this.about&&this.about.onTouchUp(i),this.home&&this.home.onTouchUp(i)}onWheel(e){this.home&&this.home.onWheel(e)}update(e){this.about&&this.about.update(e),this.home&&this.home.update(),this.renderer.render({camera:this.camera,scene:this.scene})}}}},(function(e){e.h=()=>"e9294dbe4707e7ae4fa8"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLbUYsTUFDTm5GLEtBQUttRixLQUFLdEMsUUFBUWhCLEVBRXRCLENBSUFtQixNQUFBQSxDQUFPbEMsR0FDRGQsS0FBSzBGLE9BQ1AxRixLQUFLMEYsTUFBTTFDLE9BQU9sQyxHQUVqQmQsS0FBS21GLE1BQ05uRixLQUFLbUYsS0FBS25DLFNBRVpoRCxLQUFLeUUsU0FBU2dDLE9BQU8sQ0FDbkJ6QixPQUFRaEYsS0FBS2dGLE9BQ2JsRixNQUFPRSxLQUFLRixPQUVoQixrQkNwUEY0RyxFQUFvQkMsRUFBSSxJQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxvZW1hLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL0NvbGxlY3Rpb25zL0luZGV4LmpzIiwid2VicGFjazovL2Zsb2VtYS8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy9JbmRleC5qcyIsIndlYnBhY2s6Ly9mbG9lbWEvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNZWRpYSBmcm9tICcuL01lZGlhJ1xuaW1wb3J0IG1hcCBmcm9tICdsb2Rhc2gvbWFwJ1xuaW1wb3J0IHsgUGxhbmUsIFRyYW5zZm9ybSB9IGZyb20gJ29nbCdcbmltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhvbWUge1xuICBjb25zdHJ1Y3Rvcih7IGdsLCBzY2VuZSwgc2l6ZXMgfSkge1xuICAgIHRoaXMuZ2wgPSBnbFxuICAgIHRoaXMuc2l6ZXMgPSBzaXplc1xuICAgIHRoaXMuc2NlbmUgPSBzY2VuZVxuXG4gICAgdGhpcy5ncm91cCA9IG5ldyBUcmFuc2Zvcm0oKTtcblxuICAgIHRoaXMuZ2FsbGVyeUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9tZV9fZ2FsbGVyeScpO1xuICAgIHRoaXMubWVkaWFFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ob21lX19nYWxsZXJ5X19tZWRpYV9faW1hZ2UnKTtcblxuICAgIHRoaXMueCA9IHtcbiAgICAgIGN1cnJlbnQ6IDAsXG4gICAgICB0YXJnZXQ6IDAsXG4gICAgICBsZXJwOiAwLjEsXG4gICAgfVxuXG4gICAgdGhpcy55ID0ge1xuICAgICAgY3VycmVudDogMCxcbiAgICAgIHRhcmdldDogMCxcbiAgICAgIGxlcnA6IDAuMSxcbiAgICB9XG5cbiAgICB0aGlzLnNjcm9sbEN1cnJlbnQgPSB7XG4gICAgICB4OiAwLCBcbiAgICAgIHk6IDAsIFxuICAgIH1cblxuXG4gICAgdGhpcy5zY3JvbGwgPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICB9XG5cbiAgICB0aGlzLmNyZWF0ZUdlb21ldHJ5KCk7XG4gICAgdGhpcy5jcmVhdGVHYWxsZXJ5KCk7XG5cbiAgICB0aGlzLmdyb3VwLnNldFBhcmVudCh0aGlzLnNjZW5lKVxuXG4gICAgdGhpcy5zaG93KClcbiAgfVxuXG4gIGNyZWF0ZUdlb21ldHJ5KCkge1xuICAgIHRoaXMuZ2VvbWV0cnkgPSBuZXcgUGxhbmUodGhpcy5nbClcbiAgfVxuXG4gIGNyZWF0ZUdhbGxlcnkoKSB7XG4gICAgdGhpcy5tZWRpYXMgPSBtYXAodGhpcy5tZWRpYUVsZW1lbnRzLCAoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIHJldHVybiBuZXcgTWVkaWEoe1xuICAgICAgICBlbGVtZW50LFxuICAgICAgICBnZW9tZXRyeTogdGhpcy5nZW9tZXRyeSxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIGdsOiB0aGlzLmdsLFxuICAgICAgICBzY2VuZTogdGhpcy5ncm91cCxcbiAgICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXMsICBcbiAgICAgIH0pXG5cbiAgICB9KVxuICB9XG4gICAgICAvKipcbiAgICAgKiBBbmltYXRpb25zXG4gICAgICovXG4gICAgICBzaG93KCkge1xuICAgICAgICBtYXAodGhpcy5tZWRpYXMsIG1lZGlhID0+IG1lZGlhLnNob3coKSlcbiAgICAgICB9ICBcbiAgICAgICBoaWRlKCkge1xuICAgICAgICBtYXAodGhpcy5tZWRpYXMsIG1lZGlhID0+IG1lZGlhLmhpZGUoKSlcbiAgICAgICB9XG4gICAgXG4gIC8qKlxuICAgKiBcbiAgICogZXZlbnRzXG4gICAqL1xuICBvblJlc2l6ZSggZXZlbnQgKSB7XG4gICAgXG4gICAgdGhpcy5nYWxsZXJ5Qm91bmRzID0gdGhpcy5nYWxsZXJ5RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgLy8gZ2V0IHRoZSBzaXplIG9mIHRoZSBnYWxsZXJ5IGVsZW1lbnRcbiAgICBcbiAgICB0aGlzLmdhbGxlcnlTaXplcyA9IHtcbiAgICAgIGhlaWdodDogKHRoaXMuZ2FsbGVyeUJvdW5kcy5oZWlnaHQgLyB3aW5kb3cuaW5uZXJIZWlnaHQpICogdGhpcy5zaXplcy5oZWlnaHQsXG4gICAgICB3aWR0aDoodGhpcy5nYWxsZXJ5Qm91bmRzLndpZHRoIC8gd2luZG93LmlubmVyV2lkdGgpICogdGhpcy5zaXplcy53aWR0aCxcbiAgICB9XG4gICAgdGhpcy5zY3JvbGwueCA9IHRoaXMueC50YXJnZXQgPSAwXG4gICAgdGhpcy5zY3JvbGwueSA9IHRoaXMueS50YXJnZXQgPSAwXG4gICAgdGhpcy5zaXplcyA9IGV2ZW50LnNpemVzO1xuICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEub25SZXNpemUoIGV2ZW50LCB0aGlzLnNjcm9sbCApKVxuICAgIH1cbiAgXG4gIG9uVG91Y2hEb3duICh7IHgsIHkgfSkgeyBcbiAgICB0aGlzLnNjcm9sbEN1cnJlbnQueCA9IHRoaXMuc2Nyb2xsLnhcbiAgICB0aGlzLnNjcm9sbEN1cnJlbnQueSA9IHRoaXMuc2Nyb2xsLnlcbiAgfVxuXG4gIG9uVG91Y2hNb3ZlICh7IHgsIHkgfSkge1xuICAgIGNvbnN0IHhEaXN0YW5jZSA9IHguc3RhcnQgLSB4LmVuZFxuICAgIGNvbnN0IHlEaXN0YW5jZSA9IHkuc3RhcnQgLSB5LmVuZFxuXG4gICAgdGhpcy54LnRhcmdldCA9IHRoaXMuc2Nyb2xsQ3VycmVudC54IC0geERpc3RhbmNlXG4gICAgdGhpcy55LnRhcmdldCA9IHRoaXMuc2Nyb2xsQ3VycmVudC55IC0geURpc3RhbmNlXG4gIH1cblxuICBvblRvdWNoVXAgKHsgeCwgeSB9KSB7XG4gIH1cblxuICBvbldoZWVsKHsgcGl4ZWxYLHBpeGVsWSB9KSB7XG4gICAgdGhpcy54LnRhcmdldCArPSBwaXhlbFhcbiAgICB0aGlzLnkudGFyZ2V0IC09IHBpeGVsWSAgLy8gcmV2ZXJlZCBkb3duIGFuZCB1cCB0aGUgc2Nyb2xsIGRpcmVjdGlvblxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZVxuICAgKi9cbiAgdXBkYXRlKCkge1xuICAgIGlmICghdGhpcy5nYWxsZXJ5Qm91bmRzKSByZXR1cm5cblxuICAgIHRoaXMueC5jdXJyZW50ID0gR1NBUC51dGlscy5pbnRlcnBvbGF0ZSh0aGlzLnguY3VycmVudCwgdGhpcy54LnRhcmdldCwgdGhpcy54LmxlcnApIFxuICAgIHRoaXMueS5jdXJyZW50ID0gR1NBUC51dGlscy5pbnRlcnBvbGF0ZSh0aGlzLnkuY3VycmVudCwgdGhpcy55LnRhcmdldCwgdGhpcy55LmxlcnApIFxuXG4gICAgaWYodGhpcy5zY3JvbGwueCA8IHRoaXMueC5jdXJyZW50KSB7XG4gICAgICB0aGlzLnguZGlyZWN0aW9uID0gJ3JpZ2h0J1xuICAgIH0gZWxzZSBpZiAodGhpcy5zY3JvbGwueCA+IHRoaXMueC5jdXJyZW50KSB7XG4gICAgICB0aGlzLnguZGlyZWN0aW9uID0gJ2xlZnQnXG4gICAgfVxuICAgIGlmKHRoaXMuc2Nyb2xsLnkgPCB0aGlzLnkuY3VycmVudCkge1xuICAgICAgdGhpcy55LmRpcmVjdGlvbiA9ICd0b3AnXG4gICAgfSBlbHNlIGlmICh0aGlzLnNjcm9sbC55ID4gdGhpcy55LmN1cnJlbnQpIHtcbiAgICAgIHRoaXMueS5kaXJlY3Rpb24gPSAnYm90dG9tJ1xuICAgIH1cblxuICAgLy8gY29uc29sZS5sb2coXCJ0ZXN0IGR1IHggZGlyZWN0aW9uXCIsIHRoaXMueC5kaXJlY3Rpb24pXG5cbiAgICB0aGlzLnNjcm9sbC54ID0gdGhpcy54LmN1cnJlbnRcbiAgICB0aGlzLnNjcm9sbC55ID0gdGhpcy55LmN1cnJlbnRcblxuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZ2FsbGVyeVNpemVzLmhlaWdodClcblxuICAgIG1hcCh0aGlzLm1lZGlhcywgKG1lZGlhLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3Qgc2NhbGVYID0gbWVkaWEubWVzaC5zY2FsZS54IC8gMlxuICAgICAgXG4gICAgICBpZiAodGhpcy54LmRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgIGNvbnN0IHggPSBtZWRpYS5tZXNoLnBvc2l0aW9uLnggKyBzY2FsZVhcbiAgICAgICAgaWYgKHggPCAtdGhpcy5zaXplcy53aWR0aCAvIDIpIHtcbiAgICAgICAgICBtZWRpYS5leHRyYS54ICs9IHRoaXMuZ2FsbGVyeVNpemVzLndpZHRoXG4gICAgICAgICAgbWVkaWEubWVzaC5yb3RhdGlvbi56ID0gR1NBUC51dGlscy5yYW5kb20oLU1hdGguUEkgKiAwLjAyLCBNYXRoLlBJICogMC4wMik7XG5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLnguZGlyZWN0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICAgIGNvbnN0IHggPSBtZWRpYS5tZXNoLnBvc2l0aW9uLnggLSBzY2FsZVhcbiAgICAgICAgaWYgKHggPiB0aGlzLnNpemVzLndpZHRoIC8gMikge1xuICAgICAgICAgIG1lZGlhLmV4dHJhLnggLT0gdGhpcy5nYWxsZXJ5U2l6ZXMud2lkdGhcbiAgICAgICAgICBtZWRpYS5tZXNoLnJvdGF0aW9uLnogPSBHU0FQLnV0aWxzLnJhbmRvbSgtTWF0aC5QSSAqIDAuMDIsIE1hdGguUEkgKiAwLjAyKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBzY2FsZVkgPSBtZWRpYS5tZXNoLnNjYWxlLnkgLyAyXG4gICAgICBcbiAgICAgIGlmICh0aGlzLnkuZGlyZWN0aW9uID09PSAndG9wJykge1xuICAgICAgICBjb25zdCB5ID0gbWVkaWEubWVzaC5wb3NpdGlvbi55ICsgc2NhbGVZXG4gICAgICAgIGlmICh5IDwgLXRoaXMuc2l6ZXMuaGVpZ2h0IC8gMikge1xuICAgICAgICAgIG1lZGlhLmV4dHJhLnkgKz0gdGhpcy5nYWxsZXJ5U2l6ZXMuaGVpZ2h0XG4gICAgICAgICAgbWVkaWEubWVzaC5yb3RhdGlvbi56ID0gR1NBUC51dGlscy5yYW5kb20oLU1hdGguUEkgKiAwLjAyLCBNYXRoLlBJICogMC4wMik7XG5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLnkuZGlyZWN0aW9uID09PSAnYm90dG9tJykge1xuICAgICAgICBjb25zdCB5ID0gbWVkaWEubWVzaC5wb3NpdGlvbi55IC0gc2NhbGVZXG4gICAgICAgIGlmICh5ID4gdGhpcy5zaXplcy5oZWlnaHQgLyAyKSB7XG4gICAgICAgICAgbWVkaWEuZXh0cmEueSAtPSB0aGlzLmdhbGxlcnlTaXplcy5oZWlnaHRcbiAgICAgICAgICBtZWRpYS5tZXNoLnJvdGF0aW9uLnogPSBHU0FQLnV0aWxzLnJhbmRvbSgtTWF0aC5QSSAqIDAuMDIsIE1hdGguUEkgKiAwLjAyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbWVkaWEudXBkYXRlKHRoaXMuc2Nyb2xsKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogRGVzdHJveVxuICAgKi9cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnNjZW5lLnJlbW92ZUNoaWxkKHRoaXMuZ3JvdXApXG4gIH1cbn0iLCJpbXBvcnQgeyBDYW1lcmEsIFJlbmRlcmVyLCBUcmFuc2Zvcm0gfSBmcm9tICdvZ2wnICBcblxuaW1wb3J0IEhvbWUgZnJvbSAnY29tcG9uZW50cy9DYW52YXMvSG9tZS9JbmRleCdcbmltcG9ydCBBYm91dCBmcm9tICdjb21wb25lbnRzL0NhbnZhcy9BYm91dC9JbmRleCdcbmltcG9ydCBDb2xsZWN0aW9ucyBmcm9tICdjb21wb25lbnRzL0NhbnZhcy9Db2xsZWN0aW9ucy9JbmRleCdcbi8vIENhbWVyYSwgUmVuZGVyZXIgYW5kIFRyYW5zZm9ybSBhcmUgdGhlIHRocmVlIGVsZW1lbnRzIG5lZWRlZCB0byBjcmVhdGUgYSAzRCBzY2VuZSAtXG4vLyBCb3gsIFByb2dyYW0gYW5kIE1lc2ggYXJlIHRoZSB0aHJlZSBlbGVtZW50cyBuZWVkZWQgdG8gY3JlYXRlIGEgM0Qgb2JqZWN0XG4vLyBhbGwgdGhlIGVsZW1lbnRzIGFyZSBpbXBvcnRlZCBmcm9tIHRoZSBvZ2wgbGlicmFyeVxuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhcyB7XG4gIGNvbnN0cnVjdG9yICh7IHRlbXBsYXRlIH0pIHtcbiAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cbiAgICB0aGlzLnggPSB7XG4gICAgICBzdGFydDogMCxcbiAgICAgIGRpc3RhbmNlOiAwLFxuICAgICAgZW5kOiAwLFxuICAgIH1cbiAgICB0aGlzLnkgPSB7XG4gICAgICBzdGFydDogMCxcbiAgICAgIGRpc3RhbmNlOiAwLFxuICAgICAgZW5kOiAwLFxuICAgIH1cbiAgICB0aGlzLmNyZWF0ZUNhbWVyYSgpXG4gICAgdGhpcy5jcmVhdGVSZW5kZXJlcigpXG4gICAgdGhpcy5jcmVhdGVTY2VuZSgpXG5cbiAgICB0aGlzLm9uUmVzaXplKClcblxuICAgIHRoaXMub25DaGFuZ2VFbmQodGhpcy50ZW1wbGF0ZSlcblxuICB9XG5cbiAgY3JlYXRlUmVuZGVyZXIoKSB7XG4gICAgdGhpcy5yZW5kZXJlciA9IG5ldyBSZW5kZXJlcih7IC8vIGl0IGFsbG93c1xuICAgICAgYWxwaGE6IHRydWUsIC8vIG1ha2Ugb3VyIGNhbnZhcyB0cmFuc3BhcmVudFxuICAgICAgYW50aWFsaWFzOiB0cnVlLCAvLyBtYWtlIG91ciBjYW52YXMgc21vb3RoXG4gICAgfSlcblxuICAgIHRoaXMuZ2wgPSB0aGlzLnJlbmRlcmVyLmdsXG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZ2wuY2FudmFzKVxuICB9XG5cbiAgY3JlYXRlQ2FtZXJhKCkge1xuICAgIHRoaXMuY2FtZXJhID0gbmV3IENhbWVyYSh0aGlzLmdsKVxuICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogPSA1IC8vIHNldCB0aGUgY2FtZXJhIHBvc2l0aW9uIG9uIHRoZSB6LWF4aXMgdG8gNVxuICB9XG5cbiAgY3JlYXRlU2NlbmUoKSB7XG4gICAgdGhpcy5zY2VuZSA9IG5ldyBUcmFuc2Zvcm0oKVxuICB9XG4gIC8qKlxuICAgKiBIb21lXG4gICovXG4gY3JlYXRlSG9tZSgpIHtcbiAgIHRoaXMuaG9tZSA9IG5ldyBIb21lKHtcbiAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxuICAgICBzaXplczogdGhpcy5zaXplc1xuICAgfSlcbiB9XG4gXG4gIGRlc3Ryb3lIb21lKCkge1xuICAgIGlmICghdGhpcy5ob21lKSByZXR1cm5cbiAgICB0aGlzLmhvbWUuZGVzdHJveSgpXG4gICAgdGhpcy5ob21lID0gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIEFib3V0XG4gICAqL1xuICBjcmVhdGVDb2xsZWN0aW9ucygpIHtcbiAgICB0aGlzLmNvbGxlY3Rpb25zID0gbmV3IENvbGxlY3Rpb25zKHtcbiAgICAgIGdsOiB0aGlzLmdsLFxuICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXG4gICAgICBzaXplczogdGhpcy5zaXplc1xuICAgIH0pXG4gIH1cbiAgZGVzdHJveUNvbGxlY3Rpb25zKCkge1xuICAgIGlmICghdGhpcy5jb2xsZWN0aW9ucykgcmV0dXJuXG4gICAgdGhpcy5jb2xsZWN0aW9ucy5kZXN0cm95KClcbiAgICB0aGlzLmNvbGxlY3Rpb25zID0gbnVsbFxuICB9XG5cbiAgICAvKipcbiAgICogQ29sbGVjdGlvbnNcbiAgICovXG4gICAgY3JlYXRlQWJvdXQoKSB7XG4gICAgICB0aGlzLmFib3V0ID0gbmV3IEFib3V0KHtcbiAgICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxuICAgICAgICBzaXplczogdGhpcy5zaXplc1xuICAgICAgfSlcbiAgICB9XG4gICAgZGVzdHJveUFib3V0KCkge1xuICAgICAgaWYgKCF0aGlzLmFib3V0KSByZXR1cm5cbiAgICAgIHRoaXMuYWJvdXQuZGVzdHJveSgpXG4gICAgICB0aGlzLmFib3V0ID0gbnVsbFxuICAgIH1cblxuLyoqXG4gKiBFdmVudHNcbiAqL1xuICBvbkNoYW5nZVN0YXJ0KCkge1xuICAgIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICB0aGlzLmFib3V0LmhpZGUoKVxuICAgIH0gXG4gICAgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLmhpZGUoKVxuICAgIH1cblxuICB9XG5cbiAgb25DaGFuZ2VFbmQodGVtcGxhdGUpIHtcbiAgICBpZiAodGVtcGxhdGUgPT09ICdhYm91dCcpIHtcbiAgICAgIHRoaXMuY3JlYXRlQWJvdXQoKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRlc3Ryb3lBYm91dCgpXG4gICAgfVxuICAgIGlmICh0ZW1wbGF0ZSA9PT0gJ2hvbWUnKSB7XG4gICAgICB0aGlzLmNyZWF0ZUhvbWUoKVxuICAgIH0gZWxzZSAge1xuICAgICAgdGhpcy5kZXN0cm95SG9tZSgpXG4gICAgfVxuICB9XG5cblxuXG4gIG9uUmVzaXplKCkge1xuICAgIHRoaXMucmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KVxuICAgIFxuICAgIHRoaXMuY2FtZXJhLnBlcnNwZWN0aXZlKHtcbiAgICAgIGFzcGVjdDogd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHRcbiAgICB9KTtcbiAgICBjb25zdCBmb3YgPSB0aGlzLmNhbWVyYS5mb3YgKiAoTWF0aC5QSSAvIDE4MClcbiAgICBjb25zdCBoZWlnaHQgPSAyICogTWF0aC50YW4oZm92IC8gMikgKiB0aGlzLmNhbWVyYS5wb3NpdGlvbi56XG4gICAgY29uc3Qgd2lkdGggPSBoZWlnaHQgKiB0aGlzLmNhbWVyYS5hc3BlY3RcblxuICAgIHRoaXMuc2l6ZXMgPSB7XG4gICAgICBoZWlnaHQsXG4gICAgICB3aWR0aFxuICAgIH1cblxuICAgIGNvbnN0IHZhbHVlcyA9IHtcbiAgICAgIHNpemVzOiB0aGlzLnNpemVzXG4gICAgfVxuXG4gIGlmICh0aGlzLmFib3V0KSB7XG4gICAgdGhpcy5hYm91dC5vblJlc2l6ZSh2YWx1ZXMpXG4gIH1cblxuICBpZiAodGhpcy5ob21lKSB7XG4gICAgdGhpcy5ob21lLm9uUmVzaXplKHZhbHVlcylcbiAgfVxuXG4gIH1cblxuICBvblRvdWNoRG93bihldmVudCkge1xuICAgIHRoaXMuaXNEb3duID0gdHJ1ZVxuICAgIHRoaXMueC5zdGFydCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5jbGllbnRYXG4gICAgdGhpcy55LnN0YXJ0ID0gZXZlbnQudG91Y2hlcyA/IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSA6IGV2ZW50LmNsaWVudFlcblxuICAgIGNvbnN0IHZhbHVlcyA9IHtcbiAgICAgIHg6IHRoaXMueCxcbiAgICAgIHk6IHRoaXMueSxcbiAgICB9XG5cbiAgICBpZih0aGlzLmFib3V0KSB7XG4gICAgICB0aGlzLmFib3V0Lm9uVG91Y2hEb3duKHZhbHVlcylcbiAgICB9XG4gICBcbiAgICBpZih0aGlzLmhvbWUpIHtcbiAgICAgIHRoaXMuaG9tZS5vblRvdWNoRG93bih2YWx1ZXMpXG4gICAgfVxuICB9XG4gIG9uVG91Y2hNb3ZlKGV2ZW50KSB7IC8vIGFsbG93cyB0byBtb3ZlIHRoZSB3ZWIgR0wgcGFnZSB3aXRoIHRoZSBtb3VzZVxuICAgIGlmICghdGhpcy5pc0Rvd24pIHJldHVyblxuXG4gICAgY29uc3QgeCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5jbGllbnRYXG4gICAgY29uc3QgeSA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFkgOiBldmVudC5jbGllbnRZXG5cbiAgICB0aGlzLnguZW5kID0geFxuICAgIHRoaXMueS5lbmQgPSB5XG5cbiAgICBjb25zdCB2YWx1ZXMgPSB7XG4gICAgICB4OiB0aGlzLngsXG4gICAgICB5OiB0aGlzLnksXG4gICAgfVxuXG4gICAgaWYodGhpcy5hYm91dCkge1xuICAgICAgdGhpcy5hYm91dC5vblRvdWNoTW92ZSh2YWx1ZXMpXG4gICAgfVxuICAgXG4gICAgaWYodGhpcy5ob21lKSB7XG4gICAgICB0aGlzLmhvbWUub25Ub3VjaE1vdmUodmFsdWVzKVxuICAgIH1cbiAgfVxuXG4gIG9uVG91Y2hVcChldmVudCkge1xuICAgIHRoaXMuaXNEb3duID0gZmFsc2VcbiAgICBjb25zdCB4ID0gZXZlbnQuY2hhbmdlZFRvdWNoZXMgPyBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYIDogZXZlbnQuY2xpZW50WFxuICAgIGNvbnN0IHkgPSBldmVudC5jaGFuZ2VkVG91Y2hlcyA/IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkgOiBldmVudC5jbGllbnRZXG5cbiAgICB0aGlzLnguZW5kID0geFxuICAgIHRoaXMueS5lbmQgPSB5XG5cbiAgICAvLyB0aGlzLnguZGlzdGFuY2UgPSB0aGlzLnguc3RhcnQgLSB0aGlzLnguZW5kXG4gICAgLy8gdGhpcy55LmRpc3RhbmNlID0gdGhpcy55LnN0YXJ0IC0gdGhpcy55LmVuZFxuXG4gICAgY29uc3QgdmFsdWVzID0ge1xuICAgICAgeDogdGhpcy54LFxuICAgICAgeTogdGhpcy55LFxuICAgIH1cblxuICAgIGlmKHRoaXMuYWJvdXQpIHtcbiAgICAgIHRoaXMuYWJvdXQub25Ub3VjaFVwKHZhbHVlcylcbiAgICB9XG4gIFxuICAgIGlmKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLm9uVG91Y2hVcCh2YWx1ZXMpXG4gICAgfVxuICB9IFxuXG4gIG9uV2hlZWwoZXZlbnQpIHtcbiAgICBpZih0aGlzLmhvbWUpIHtcbiAgICAgIHRoaXMuaG9tZS5vbldoZWVsKGV2ZW50KSBcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIExvb3BzXG4gICAqL1xuICB1cGRhdGUoc2Nyb2xsKSB7XG4gICAgaWYgKHRoaXMuYWJvdXQpIHtcbiAgICAgIHRoaXMuYWJvdXQudXBkYXRlKHNjcm9sbClcbiAgICB9XG4gICAgaWYodGhpcy5ob21lKSB7XG4gICAgICB0aGlzLmhvbWUudXBkYXRlKClcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJlci5yZW5kZXIoe1xuICAgICAgY2FtZXJhOiB0aGlzLmNhbWVyYSxcbiAgICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxuICAgIH0pXG4gIH1cbn1cblxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCJlOTI5NGRiZTQ3MDdlN2FlNGZhOFwiKSJdLCJuYW1lcyI6WyJIb21lIiwiY29uc3RydWN0b3IiLCJnbCIsInNjZW5lIiwic2l6ZXMiLCJ0aGlzIiwiZ3JvdXAiLCJUcmFuc2Zvcm0iLCJnYWxsZXJ5RWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1lZGlhRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwieCIsImN1cnJlbnQiLCJ0YXJnZXQiLCJsZXJwIiwieSIsInNjcm9sbEN1cnJlbnQiLCJzY3JvbGwiLCJjcmVhdGVHZW9tZXRyeSIsImNyZWF0ZUdhbGxlcnkiLCJzZXRQYXJlbnQiLCJzaG93IiwiZ2VvbWV0cnkiLCJQbGFuZSIsIm1lZGlhcyIsIm1hcCIsImVsZW1lbnQiLCJpbmRleCIsIk1lZGlhIiwibWVkaWEiLCJoaWRlIiwib25SZXNpemUiLCJldmVudCIsImdhbGxlcnlCb3VuZHMiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJnYWxsZXJ5U2l6ZXMiLCJoZWlnaHQiLCJ3aW5kb3ciLCJpbm5lckhlaWdodCIsIndpZHRoIiwiaW5uZXJXaWR0aCIsIm9uVG91Y2hEb3duIiwib25Ub3VjaE1vdmUiLCJ4RGlzdGFuY2UiLCJzdGFydCIsImVuZCIsInlEaXN0YW5jZSIsIm9uVG91Y2hVcCIsIm9uV2hlZWwiLCJwaXhlbFgiLCJwaXhlbFkiLCJ1cGRhdGUiLCJHU0FQIiwidXRpbHMiLCJpbnRlcnBvbGF0ZSIsImRpcmVjdGlvbiIsInNjYWxlWCIsIm1lc2giLCJzY2FsZSIsInBvc2l0aW9uIiwiZXh0cmEiLCJyb3RhdGlvbiIsInoiLCJyYW5kb20iLCJNYXRoIiwiUEkiLCJzY2FsZVkiLCJkZXN0cm95IiwicmVtb3ZlQ2hpbGQiLCJDYW52YXMiLCJ0ZW1wbGF0ZSIsImRpc3RhbmNlIiwiY3JlYXRlQ2FtZXJhIiwiY3JlYXRlUmVuZGVyZXIiLCJjcmVhdGVTY2VuZSIsIm9uQ2hhbmdlRW5kIiwicmVuZGVyZXIiLCJSZW5kZXJlciIsImFscGhhIiwiYW50aWFsaWFzIiwiYm9keSIsImFwcGVuZENoaWxkIiwiY2FudmFzIiwiY2FtZXJhIiwiQ2FtZXJhIiwiY3JlYXRlSG9tZSIsImhvbWUiLCJkZXN0cm95SG9tZSIsImNyZWF0ZUNvbGxlY3Rpb25zIiwiY29sbGVjdGlvbnMiLCJDb2xsZWN0aW9ucyIsImRlc3Ryb3lDb2xsZWN0aW9ucyIsImNyZWF0ZUFib3V0IiwiYWJvdXQiLCJBYm91dCIsImRlc3Ryb3lBYm91dCIsIm9uQ2hhbmdlU3RhcnQiLCJzZXRTaXplIiwicGVyc3BlY3RpdmUiLCJhc3BlY3QiLCJmb3YiLCJ0YW4iLCJ2YWx1ZXMiLCJpc0Rvd24iLCJ0b3VjaGVzIiwiY2xpZW50WCIsImNsaWVudFkiLCJjaGFuZ2VkVG91Y2hlcyIsInJlbmRlciIsIl9fd2VicGFja19yZXF1aXJlX18iLCJoIl0sInNvdXJjZVJvb3QiOiIifQ==